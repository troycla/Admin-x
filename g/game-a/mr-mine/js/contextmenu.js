class ContextMenu extends Hitbox{root;bodyContainer;isInitialized=!1;frameWidth=12;xMin=-1;xMax=-1;yMin=-1;yMax=-1;backgroundImage=POPUP_FRAME_SETS[EARTH_INDEX].backgroundImage;popupFrameImage=POPUP_FRAME_SETS[EARTH_INDEX].popupFrameImage;closeButtonImage=POPUP_FRAME_SETS[EARTH_INDEX].closeButtonImage;constructor(i,t=""){super(i,{},"",t)}initialize(){this.root=this.getRootLayer(),this.root.worldIndex&&this.setFrameImagesByWorldIndex(this.root.worldIndex);var i=.05*this.boundingBox.width/uiScaleX,t=.056*this.boundingBox.height/uiScaleY,e=.017*this.boundingBox.width/uiScaleX,o=.03*this.boundingBox.height/uiScaleY,h=Math.max(15,i);this.bodyContainer=new Hitbox({x:i,y:t,width:this.boundingBox.width-(2*i+e),height:this.boundingBox.height-(2*t+o)},{},"","bodyContainer"),this.addHitbox(this.bodyContainer),this.closeButton=this.addHitbox(new Button(this.closeButtonImage,"","","",{x:this.boundingBox.width-h,y:0,width:h,height:h},{onmousedown:function(){this.hide(),this.onHide()}.bind(this)},"pointer","closeButton")),this.isInitialized=!0}render(){var i=this.root.context,t=this.getRelativeCoordinates(0,0,this.root);i.drawImage(this.backgroundImage,t.x,t.y,this.boundingBox.width,this.boundingBox.height),this.renderChildren(),drawFrame(i,this.popupFrameImage,t.x,t.y,this.boundingBox.width,this.boundingBox.height,this.frameWidth),this.closeButton.render()}show(i,t){this.isInitialized||this.initialize();var e=this.parent.getRelativeCoordinates(i,t,this.root),o=0,h=this.root.boundingBox.width,n=0,s=this.root.boundingBox.height;this.xMin>=0&&(o=this.xMin),this.xMax>=0&&(h=this.xMax),this.yMin>=0&&(n=this.yMin),this.yMax>=0&&(s=this.yMax),e.x=Math.max(o,Math.min(e.x,h-this.boundingBox.width)),e.y=Math.max(n,Math.min(e.y,s-this.boundingBox.height));var a=this.root.getRelativeCoordinates(e.x,e.y,this.parent);this.boundingBox.x=a.x,this.boundingBox.y=a.y,this.setVisible(!0),this.setEnabled(!0)}hide(){this.setVisible(!1),this.setEnabled(!1)}onHide(){}toggle(i,t){this.isVisible()?this.hide():this.show(i,t)}setFrameImagesByWorldIndex(i){this.backgroundImage=POPUP_FRAME_SETS[i].backgroundImage,this.popupFrameImage=POPUP_FRAME_SETS[i].popupFrameImage,this.closeButtonImage=POPUP_FRAME_SETS[i].closeButtonImage,this.activeTabImage=POPUP_FRAME_SETS[i].activeTabImage,this.inactiveTabImage=POPUP_FRAME_SETS[i].inactiveTabImage}}