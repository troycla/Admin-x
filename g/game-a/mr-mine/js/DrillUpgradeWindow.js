class DrillUpgradeWindow extends TabbedPopupWindow{layerName="drill";domElementId="DRILLD";context=DRILL;constructor(t){super(t),t||this.setBoundingBox(),this.setFrameImagesByWorldIndex(0),this.initializeTabs([_("Engine"),_("Drill"),_("Drill Fan"),_("Cargo")]),this.addHitbox(new Hitbox({x:.31*this.boundingBox.width,y:.81*this.boundingBox.height,width:.35*this.boundingBox.width,height:.08*this.boundingBox.height},{onmousedown:function(){for(var t=getDrillEquipByLevel(this.parent.currentTabIndex,getDrillEquipById(drillState.equippedDrillEquips[this.parent.currentTabIndex]).level+1),i=getDrillBlueprintByEquipId(t.id),e=getIngredientListWithDiscounts(i.ingredients),n=0;n<e.length;n++)e[n].item.hasQuantity(e[n].quantity/10)&&e[n].item.spendQuantity(e[n].quantity/10);drillState.levelsTowardNextUpgrades[this.parent.currentTabIndex]+=1,drillState.levelsTowardNextUpgrades[this.parent.currentTabIndex]>=10&&(drillState.equippedDrillEquips[nextUpgrade.type]=nextUpgrade.id,newNews(_("You crafted {0}",i.craftedItem.item.getName()),!0),drillState.levelsTowardNextUpgrades[this.parent.currentTabIndex]=0),mutebuttons||craftDrillAudio.play()}},"pointer","upgradeButton"))}render(){this.context.save(),this.context.clearRect(0,0,this.boundingBox.width,this.boundingBox.height),this.context.restore(),super.render();var t=getDrillEquipByLevel(this.currentTabIndex,getDrillEquipById(drillState.equippedDrillEquips[this.currentTabIndex]).level+1);renderProgressBar(this.context,_("{0}/10",drillState.levelsTowardNextUpgrades[this.currentTabIndex]),extradarkgreydot,blackdot,.2*this.boundingBox.width,.2*this.boundingBox.height,.58*this.boundingBox.width,.09*this.boundingBox.height,"#FFFFFF",.1*Number(drillState.levelsTowardNextUpgrade)),this.context.drawImage(getDrillEquipById(drillState.equippedDrillEquips[this.currentTabIndex]).icon,0,0,50,50,.1*this.boundingBox.width,.18*this.boundingBox.height,.08*this.boundingBox.width,.12*this.boundingBox.height),this.context.drawImage(t.icon,0,0,50,50,.8*this.boundingBox.width,.18*this.boundingBox.height,.08*this.boundingBox.width,.12*this.boundingBox.height);var i=drillState.totalWattage(),e=drillState.totalWattMultiplier(),n=maxHoldingCapacity();0==this.currentTabIndex?(e=drillState.statForType(ENGINE_TYPE,drillState.levelsTowardNextUpgrades[ENGINE_TYPE]+1,"wattMultiplier")*drillState.statForType(DRILL_TYPE,drillState.levelsTowardNextUpgrades[DRILL_TYPE],"wattMultiplier")*drillState.statForType(DRILL_FAN_TYPE,drillState.levelsTowardNextUpgrades[DRILL_FAN_TYPE],"wattMultiplier"),i=drillState.statForType(ENGINE_TYPE,drillState.levelsTowardNextUpgrades[ENGINE_TYPE]+1,"baseWatts")+drillState.statForType(DRILL_TYPE,drillState.levelsTowardNextUpgrades[DRILL_TYPE],"baseWatts")+drillState.statForType(DRILL_FAN_TYPE,drillState.levelsTowardNextUpgrades[DRILL_FAN_TYPE],"baseWatts")):1==this.currentTabIndex?(e=drillState.statForType(ENGINE_TYPE,drillState.levelsTowardNextUpgrades[ENGINE_TYPE],"wattMultiplier")*drillState.statForType(DRILL_TYPE,drillState.levelsTowardNextUpgrades[DRILL_TYPE]+1,"wattMultiplier")*drillState.statForType(DRILL_FAN_TYPE,drillState.levelsTowardNextUpgrades[DRILL_FAN_TYPE],"wattMultiplier"),i=drillState.statForType(ENGINE_TYPE,drillState.levelsTowardNextUpgrades[ENGINE_TYPE],"baseWatts")+drillState.statForType(DRILL_TYPE,drillState.levelsTowardNextUpgrades[DRILL_TYPE]+1,"baseWatts")+drillState.statForType(DRILL_FAN_TYPE,drillState.levelsTowardNextUpgrades[DRILL_FAN_TYPE],"baseWatts")):2==this.currentTabIndex?(e=drillState.statForType(ENGINE_TYPE,drillState.levelsTowardNextUpgrades[ENGINE_TYPE],"wattMultiplier")*drillState.statForType(DRILL_TYPE,drillState.levelsTowardNextUpgrades[DRILL_TYPE],"wattMultiplier")*drillState.statForType(DRILL_FAN_TYPE,drillState.levelsTowardNextUpgrades[DRILL_FAN_TYPE]+1,"wattMultiplier"),i=drillState.statForType(ENGINE_TYPE,drillState.levelsTowardNextUpgrades[ENGINE_TYPE],"baseWatts")+drillState.statForType(DRILL_TYPE,drillState.levelsTowardNextUpgrades[DRILL_TYPE],"baseWatts")+drillState.statForType(DRILL_FAN_TYPE,drillState.levelsTowardNextUpgrades[DRILL_FAN_TYPE]+1,"baseWatts")):3==this.currentTabIndex&&(n=drillState.levelsTowardNextUpgrades[this.currentTabIndex]+1n<10n?(t.capacity-maxHoldingCapacity())*(.5*(drillState.levelsTowardNextUpgrades[this.currentTabIndex]+1)):t.capacity),this.context.font="13px Verdana",this.context.fillStyle="#1c1c1cd6",this.context.fillRect(.07*this.boundingBox.width,.34*this.boundingBox.height,.25*this.boundingBox.width,.21*this.boundingBox.height),this.context.fillStyle="#000000",this.context.strokeRect(.07*this.boundingBox.width,.34*this.boundingBox.height,.25*this.boundingBox.width,.21*this.boundingBox.height),this.context.fillStyle="#FFFFFF",this.context.fillText(_("Watts"),.07*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(_("Watts")).width/2),.38*this.boundingBox.height),this.context.fillText(beautifynum(drillState.totalBaseWattage()),.07*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(beautifynum(drillState.totalWattage())).width/2),.43*this.boundingBox.height),this.context.fillText(_("Next Level"),.07*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(_("Next Level")).width/2),.48*this.boundingBox.height),this.context.fillText(beautifynum(i),.07*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(beautifynum(i)).width/2),.53*this.boundingBox.height),this.context.fillStyle="#1c1c1cd6",this.context.fillRect(.36*this.boundingBox.width,.34*this.boundingBox.height,.25*this.boundingBox.width,.21*this.boundingBox.height),this.context.fillStyle="#000000",this.context.strokeRect(.36*this.boundingBox.width,.34*this.boundingBox.height,.25*this.boundingBox.width,.21*this.boundingBox.height),this.context.fillStyle="#FFFFFF",this.context.fillText(_("Watts Multiplier"),.36*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(_("Watts Multiplier")).width/2),.38*this.boundingBox.height),this.context.fillText(beautifynum(drillState.totalWattMultiplier()),.36*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(beautifynum(drillState.totalWattMultiplier())).width/2),.43*this.boundingBox.height),this.context.fillText(_("Next Level"),.36*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(_("Next Level")).width/2),.48*this.boundingBox.height),this.context.fillText(beautifynum(e),.36*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(beautifynum(e)).width/2),.53*this.boundingBox.height),this.context.fillStyle="#1c1c1cd6",this.context.fillRect(.65*this.boundingBox.width,.34*this.boundingBox.height,.25*this.boundingBox.width,.21*this.boundingBox.height),this.context.fillStyle="#000000",this.context.strokeRect(.65*this.boundingBox.width,.34*this.boundingBox.height,.25*this.boundingBox.width,.21*this.boundingBox.height),this.context.fillStyle="#FFFFFF",this.context.fillText(_("Cargo"),.65*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(_("Cargo")).width/2),.38*this.boundingBox.height),this.context.fillText(beautifynum(maxHoldingCapacity()),.65*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(beautifynum(maxHoldingCapacity())).width/2),.43*this.boundingBox.height),this.context.fillText(_("Next Level"),.65*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(_("Next Level")).width/2),.48*this.boundingBox.height),this.context.fillText(beautifynum(n),.65*this.boundingBox.width+(.25*this.boundingBox.width/2-this.context.measureText(beautifynum(n)).width/2),.53*this.boundingBox.height),this.context.fillStyle="#1c1c1cd6",this.context.fillRect(.15*this.boundingBox.width,.58*this.boundingBox.height,.68*this.boundingBox.width,.2*this.boundingBox.height),this.context.fillStyle="#000000",this.context.strokeRect(.15*this.boundingBox.width,.58*this.boundingBox.height,.68*this.boundingBox.width,.2*this.boundingBox.height),this.context.font="15px Verdana",this.context.fillStyle="#FFFFFF",this.context.fillText(_("Ingredients"),.17*this.boundingBox.width,.63*this.boundingBox.height),this.context.font="20px KanitB";for(var o=getIngredientListWithDiscounts(getDrillBlueprintByEquipId(t.id).ingredients),h=0;h<o.length;h++){var d=o[h].item;this.context.drawImage(d.getIcon(),0,0,70,70,.17*this.boundingBox.width+70*h,.65*this.boundingBox.height,.08*this.boundingBox.width,.12*this.boundingBox.height),this.context.fillStyle="#FFFFFF",this.context.fillText(shortenAndBeautifyNum(o[h].quantity/10),.17*this.boundingBox.width+70*h,.75*this.boundingBox.height),this.context.fillStyle="#000000",this.context.strokeText(shortenAndBeautifyNum(o[h].quantity/10),.17*this.boundingBox.width+70*h,.75*this.boundingBox.height),o[h].item.hasQuantity(o[h].quantity/10)?renderCheckmark(this.context,.17*this.boundingBox.width+70*h,.65*this.boundingBox.height,14,14):renderXMark(this.context,.17*this.boundingBox.width+70*h,.65*this.boundingBox.height,12,12)}this.context.drawImage(upgradeb,.31*this.boundingBox.width,.81*this.boundingBox.height,.35*this.boundingBox.width,.08*this.boundingBox.height),this.context.font="19px KanitB",this.context.fillStyle="#000000",this.context.fillText(_("Upgrade"),.31*this.boundingBox.width+(.35*this.boundingBox.width/2-this.context.measureText(_("Upgrade")).width/2),.86*this.boundingBox.height)}}