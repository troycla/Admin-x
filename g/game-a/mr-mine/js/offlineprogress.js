var isOfflineProgressActive=!1,cavesSpawnDuringOfflineProgress=0,managerStats=[{efficiency:.25,durationMins:720},{efficiency:.5,durationMins:1440},{efficiency:1,durationMins:2880}];function timeSinceLastPlay(){return servertime-savetime}function runOfflineProgress(){var e=timeSinceLastPlay(),i=Math.min(managerStats.length,managerStructure.level),r=managerStats[i-1].efficiency,t=managerStats[i-1].durationMins*STAT.offlineProgressMaxDurationMultiplier(),n=Math.floor(e/60),a=t<n,s=Math.min(n,t),l={depth:decimalDepth(),mineralValue:getValueOfMinerals(),secondsOffline:e,offlineEfficiency:r,offlineDurationMins:s,usedMaxOfflineTimeAmount:a},f=s*r;if(isOfflineProgressActive=!0,timelapse(f),chestCollectorStorageStructure.level>0){for(var c=0;c<f;c+=.5)chestService.spawnRandomChests(),chestService.isChestCollectorFull()&&(c=f);chestService.removeAllChests()}if(1==cavesSpawnDuringOfflineProgress&&f>=240&&depth>=MIN_CAVE_SYSTEM_SPAWN_DEPTH)for(c=0;c<1e5;c++)0==numActiveCaves()?rollForCaveSystemSpawn():c=1e5;return isOfflineProgressActive=!1,l.depth=decimalDepth()-l.depth,l.mineralValue=getValueOfMinerals().subtract(l.mineralValue),l}