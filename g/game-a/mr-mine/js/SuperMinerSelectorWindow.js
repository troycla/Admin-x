class SuperMinerSelectorWindow extends PopupWindow{layerName="SuperMinerSelectorWindow";domElementId="SPECIALD";context=SPC;isRendered=!0;isPopup=!0;allowBubbling=!1;zIndex=4;constructor(t,i){super(t),this.setBoundingBox(),this.superMiner=i,this.bg=i.rarity.mediumFrame,this.madeAChoice=!1,this.initHitboxes()}initHitboxes(){this.clearHitboxes(),this.skillButton=this.addHitbox(new Hitbox({x:.116*this.boundingBox.width,y:.473*this.boundingBox.height,width:.1075*relativeWidth(this.bg),height:.1075*relativeWidth(this.bg)},{},"cursor","skillButton")),this.equipButton=this.addHitbox(new Hitbox({x:.125*this.boundingBox.width,y:.57*this.boundingBox.height,width:.4*relativeWidth(this.bg),height:.075*relativeHeight(this.bg)},{onmousedown:()=>{superMinerManager.isFull()?showConfirmationPrompt(_("You have no slots available to equip {0}. Do you want to make room or scrap {0} for {1} Super Miner Souls?",this.superMiner.name,this.superMiner.scrapAmount()),_("Make room"),(()=>{activeLayers.Super&&0==activeLayers.Super.showScrapButtons&&(activeLayers.Super.showScrapButtons=!0,activeLayers.Super.initializeScrollboxContents())}),_("Scrap"),(()=>{this.madeAChoice=!0,superMinerManager.removePendingSuperMiner()&&this.superMiner.scrap(),closeUi(this),activeLayers.Super&&(activeLayers.Super.showScrapButtons=!1,activeLayers.Super.initializeScrollboxContents())})):(this.madeAChoice=!0,superMinerManager.removePendingSuperMiner()&&superMinerManager.addSuperMiner(this.superMiner),closeUi(this),activeLayers.Super&&(activeLayers.Super.showScrapButtons=!1,activeLayers.Super.initializeScrollboxContents()))}},"pointer","equipButton")),this.scrapButton=this.addHitbox(new Hitbox({x:.125*this.boundingBox.width,y:.63*this.boundingBox.height,width:.4*relativeWidth(this.bg),height:.075*relativeHeight(this.bg)},{onmousedown:()=>{showConfirmationPrompt(_("Are you sure you want to scrap {0} for {1} Super Miner Souls?",this.superMiner.name,this.superMiner.scrapAmount()),_("Yes"),(()=>{this.madeAChoice=!0,superMinerManager.removePendingSuperMiner()&&this.superMiner.scrap(),closeUi(this),activeLayers.Super&&(activeLayers.Super.showScrapButtons=!1,activeLayers.Super.initializeScrollboxContents())}),_("No"))}},"pointer","scrapButton"))}close(){if(this.madeAChoice)return super.close();showConfirmationPrompt(_("Are you sure you want to scrap {0} for {1} Super Miner Souls?",this.superMiner.name,this.superMiner.scrapAmount()),_("Yes"),(()=>{superMinerManager.removePendingSuperMiner()&&this.superMiner.scrap(),activeLayers.Super&&(activeLayers.Super.showScrapButtons=!1,activeLayers.Super.initializeScrollboxContents())}),_("No"),(()=>{openUiWithoutClosing(SuperMinersWindow,null,0,!0,this.superMiner),this.setBoundingBox()}))}render(){this.context.clearRect(0,0,this.boundingBox.width,this.boundingBox.height),drawColoredRect(this.context,0,0,this.boundingBox.width,this.boundingBox.height,"#000000",.5),this.context.font=.025*this.boundingBox.height+"px KanitB",this.context.lineWidth=6;let t=this.superMiner.buttonIcon,i=this.superMiner.rarity.name,e=this.superMiner.portrait,n=.5*relativeWidth(this.bg),o=.5*relativeHeight(this.bg),r=.11*this.boundingBox.width,s=.25*this.boundingBox.height;this.boundingBox.width;if(this.context.drawImage(this.bg,0,0,this.bg.width,this.bg.height,r,s,n,o),this.context.fillStyle="#000000",fillTextShrinkToFit(this.context,this.superMiner.name,r,s+.062*o,n,"center"),this.context.drawImage(e,0,0,e.width,e.height,r+.21*n,s+.11*o,.5*relativeWidth(e),.5*relativeHeight(e)),this.context.font=.015*this.boundingBox.height+"px KanitB",this.context.strokeStyle="#FFFFFF",this.context.lineWidth=2,strokeTextShrinkToFit(this.context,i,r,s+.605*o,n,"center"),this.context.fillStyle="#A25D03",fillTextShrinkToFit(this.context,i,r,s+.605*o,n,"center"),this.context.strokeStyle="#000000",t){let i=this.getHitboxById("skillButton");this.context.drawImage(t,0,0,t.width,t.height,i.boundingBox.x,i.boundingBox.y,i.boundingBox.width,i.boundingBox.height)}this.context.fillStyle="#FFFFFF",this.context.font=.02*this.boundingBox.height+"px Verdana",this.superMiner.renderDescription&&this.superMiner.renderDescription(this.context,r+.3*n,s+.725*o,.65*n,.29*o);let h=this.getHitboxById("equipButton");h&&(this.context.drawImage(startb,0,0,startb.width,startb.height,h.boundingBox.x,h.boundingBox.y,h.boundingBox.width,h.boundingBox.height),this.context.lineWidth=5,this.context.strokeStyle="#000000",this.context.fillStyle="#FFFFFF",strokeTextWrapWithHeightLimit(this.context,_("Equip"),h.boundingBox.x+.1*h.boundingBox.width,h.boundingBox.y+.7*h.boundingBox.height,.8*h.boundingBox.width,.7*h.boundingBox.height,"center"),fillTextWrapWithHeightLimit(this.context,_("Equip"),h.boundingBox.x+.1*h.boundingBox.width,h.boundingBox.y+.7*h.boundingBox.height,.8*h.boundingBox.width,.7*h.boundingBox.height,"center"));let u=this.getHitboxById("scrapButton");u&&(this.context.drawImage(stopb,0,0,stopb.width,stopb.height,u.boundingBox.x,u.boundingBox.y,u.boundingBox.width,u.boundingBox.height),this.context.lineWidth=5,this.context.strokeStyle="#000000",this.context.fillStyle="#FFFFFF",strokeTextWrapWithHeightLimit(this.context,_("Scrap"),u.boundingBox.x+.1*u.boundingBox.width,u.boundingBox.y+.7*u.boundingBox.height,.8*u.boundingBox.width,.7*u.boundingBox.height,"center"),fillTextWrapWithHeightLimit(this.context,_("Scrap"),u.boundingBox.x+.1*u.boundingBox.width,u.boundingBox.y+.7*u.boundingBox.height,.8*u.boundingBox.width,.7*u.boundingBox.height,"center")),super.render()}}