class GemForgeWindow extends TabbedPopupWindow{layerName="gemforge";domElementId="GEMFORGED";context=GEMFORGE;constructor(e){super(e),e||this.setBoundingBox();var t={0:_("Forge Home"),1:_("Forge Queue"),2:_("Forge Stats")};this.initializeTabs(Object.values(t)),this.forgeHomePane=new Hitbox({x:0,y:0,width:this.boundingBox.width,height:this.boundingBox.height},{},"","forgeHomePane"),this.forgeHomePane.allowBubbling=!0,this.addHitbox(this.forgeHomePane),this.forgeQueuePane=new Scrollbox(this.bodyContainer.boundingBox.width,0,this.context,this.bodyContainer.boundingBox.x,1.2*this.bodyContainer.boundingBox.y,this.bodyContainer.boundingBox.width,this.bodyContainer.boundingBox.height/1.06,15),this.forgeQueuePane.allowBubbling=!0,this.addHitbox(this.forgeQueuePane),this.forgeStatsPane=new Hitbox({x:0,y:0,width:this.boundingBox.width,height:this.boundingBox.height},{},"","forgeStatsPane"),this.forgeStatsPane.allowBubbling=!0,this.addHitbox(this.forgeStatsPane),this.onTabChange()}onTabChange(){0==this.currentTabIndex?(this.forgeHomePane.setVisible(!0),this.forgeHomePane.setEnabled(!0),this.forgeQueuePane.setVisible(!1),this.forgeQueuePane.setEnabled(!1),this.forgeStatsPane.setVisible(!1),this.forgeStatsPane.setEnabled(!1),this.initializeHomeHitboxes()):1==this.currentTabIndex?(this.forgeHomePane.setVisible(!1),this.forgeHomePane.setEnabled(!1),this.forgeQueuePane.setVisible(!0),this.forgeQueuePane.setEnabled(!0),this.forgeStatsPane.setVisible(!1),this.forgeStatsPane.setEnabled(!1),this.initializeQueueHitboxes()):2==this.currentTabIndex&&(this.forgeHomePane.setVisible(!1),this.forgeHomePane.setEnabled(!1),this.forgeQueuePane.setVisible(!1),this.forgeQueuePane.setEnabled(!1),this.forgeStatsPane.setVisible(!0),this.forgeStatsPane.setEnabled(!0),this.initializeStatsHitboxes())}initializeHomeHitboxes(){this.forgeHomePane.clearHitboxes(),this.forgeHomePane.addHitbox(new Hitbox({x:.15*this.boundingBox.width,y:.6*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){if(keysPressed.Shift)for(var e=0;e<5;e++)GemForger.canQueueGem(RED_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(RED_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));else GemForger.canQueueGem(RED_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(RED_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){var e=getGemBlueprintForGemId(RED_FORGED_GEM_INDEX),t=generatePrettyBlueprintTooltip(e);t.description=_("<b>Time:</b> {0}<br><b>Workload:</b> {1}<br><br><b>Materials:</b><br>{2}",formattedCountDown(e.forgeTimeSeconds*STAT.gemSpeedMultiplier()),e.forgeCost,t.description),showTooltip(t.title,t.description,mouseX,mouseY,180)},onmouseexit:function(){hideTooltip()}},"pointer","craftRedGemButton")),this.forgeHomePane.addHitbox(new Hitbox({x:.4*this.boundingBox.width,y:.6*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){if(keysPressed.Shift)for(var e=0;e<5;e++)GemForger.canQueueGem(BLUE_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(BLUE_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));else GemForger.canQueueGem(BLUE_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(BLUE_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){var e=getGemBlueprintForGemId(BLUE_FORGED_GEM_INDEX),t=generatePrettyBlueprintTooltip(e);t.description=_("<b>Time:</b> {0}<br><b>Workload:</b> {1}<br><br><b>Materials:</b><br>{2}",formattedCountDown(e.forgeTimeSeconds*STAT.gemSpeedMultiplier()),e.forgeCost,t.description),showTooltip(t.title,t.description,mouseX,mouseY,180)},onmouseexit:function(){hideTooltip()}},"pointer","craftBlueGemButton")),this.forgeHomePane.addHitbox(new Hitbox({x:.65*this.boundingBox.width,y:.6*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){if(keysPressed.Shift)for(var e=0;e<5;e++)GemForger.canQueueGem(GREEN_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(GREEN_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));else GemForger.canQueueGem(GREEN_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(GREEN_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){var e=getGemBlueprintForGemId(GREEN_FORGED_GEM_INDEX),t=generatePrettyBlueprintTooltip(e);t.description=_("<b>Time:</b> {0}<br><b>Workload:</b> {1}<br><br><b>Materials:</b><br>{2}",formattedCountDown(e.forgeTimeSeconds*STAT.gemSpeedMultiplier()),e.forgeCost,t.description),showTooltip(t.title,t.description,mouseX,mouseY,180)},onmouseexit:function(){hideTooltip()}},"pointer","craftGreenGemButton")),this.forgeHomePane.addHitbox(new Hitbox({x:.15*this.boundingBox.width,y:.805*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){if(keysPressed.Shift)for(var e=0;e<5;e++)GemForger.canQueueGem(PURPLE_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(PURPLE_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));else GemForger.canQueueGem(PURPLE_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(PURPLE_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){var e=getGemBlueprintForGemId(PURPLE_FORGED_GEM_INDEX),t=generatePrettyBlueprintTooltip(e);t.description=_("<b>Time:</b> {0}<br><b>Workload:</b> {1}<br><br><b>Materials:</b><br>{2}",formattedCountDown(e.forgeTimeSeconds*STAT.gemSpeedMultiplier()),e.forgeCost,t.description),showTooltip(t.title,t.description,mouseX,mouseY,180)},onmouseexit:function(){hideTooltip()}},"pointer","craftPurpleGemButton")),this.forgeHomePane.addHitbox(new Hitbox({x:.4*this.boundingBox.width,y:.805*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){if(keysPressed.Shift)for(var e=0;e<5;e++)GemForger.canQueueGem(YELLOW_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(YELLOW_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));else GemForger.canQueueGem(YELLOW_FORGED_GEM_INDEX)&&(GemForger.addGemToQueue(YELLOW_FORGED_GEM_INDEX),this.parent.parent.flickerTab(1,500));mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){var e=getGemBlueprintForGemId(YELLOW_FORGED_GEM_INDEX),t=generatePrettyBlueprintTooltip(e);t.description=_("<b>Time:</b> {0}<br><b>Workload:</b> {1}<br><br><b>Materials:</b><br>{2}",formattedCountDown(e.forgeTimeSeconds*STAT.gemSpeedMultiplier()),e.forgeCost,t.description),showTooltip(t.title,t.description,mouseX,mouseY,180)},onmouseexit:function(){hideTooltip()}},"pointer","craftYellowGemButton")),this.forgeHomePane.addHitbox(new Hitbox({x:.65*this.boundingBox.width,y:.805*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){if(keysPressed.Shift)for(var e=0;e<5;e++)GemForger.canQueueGem(FORGE_CATALYST_INDEX)&&(GemForger.addGemToQueue(FORGE_CATALYST_INDEX),this.parent.parent.flickerTab(1,500));else GemForger.canQueueGem(FORGE_CATALYST_INDEX)&&(GemForger.addGemToQueue(FORGE_CATALYST_INDEX),this.parent.parent.flickerTab(1,500));mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){var e=getGemBlueprintForGemId(FORGE_CATALYST_INDEX),t=generatePrettyBlueprintTooltip(e);t.description=_("<b>Time:</b> {0}<br><b>Workload:</b> {1}<br><br><b>Materials:</b><br>{2}",formattedCountDown(e.forgeTimeSeconds),e.forgeCost,t.description),showTooltip(t.title,t.description,mouseX,mouseY,180)},onmouseexit:function(){hideTooltip()}},"pointer","craftCatalyzerButton")),this.forgeHomePane.addHitbox(new Hitbox({x:.75*this.boundingBox.width,y:.22*this.boundingBox.height,width:.1*this.boundingBox.width,height:.125*this.boundingBox.height},{onmouseenter:function(){showTooltip(_("Forge Catalyst"),_("Decreases the time to forge a gem by {0}%.<br><br>(Stacks multiplicatively)","20"))},onmouseexit:function(){hideTooltip()}},"pointer","catalystTooltip"))}initializeCancelButton(e,t,i){var o=i,n=new Hitbox({x:.935*this.forgeQueuePane.contentWidth,y:t,width:.05*this.forgeQueuePane.contentWidth,height:.07*this.forgeQueuePane.boundingBox.height},{onmousedown:function(e){if(null!=e&&GemForger.forgeQueue.queuedGems.length>o){GemForger.forgeQueue.dequeuFinishedGems(o),console.log(e.blueprint.ingredients);for(var t=0;t<e.blueprint.ingredients.length;t++)e.blueprint.ingredients[t]&&(e.blueprint.ingredients[t].item.grantQuantity(e.blueprint.ingredients[t].quantity),e.blueprint.ingredients[t].item instanceof GemCraftingItem&&(console.log("Returning GemCraftingItem "+e.blueprint.ingredients[t].item.id),worldResources[e.blueprint.ingredients[t].item.id].numOwned+=e.blueprint.ingredients[t].quantity))}mutebuttons||closeAudio[rand(0,closeAudio.length-1)].play()}.bind(n,e),onmouseenter:function(e){null!=e&&showTooltip(_("Cancel"),_("Cancel crafting and refund the cost."))}.bind(n,e),onmouseexit:function(){hideTooltip()}},"pointer","cancelGemCraftButton"+i);n.render=function(){var e;e=deleteb,this.setEnabled(!0);var t=this.parent.context;renderButton(t,e,"",this.boundingBox.x+this.parent.scrollbarWidth,this.boundingBox.y/this.parent.scale,this.boundingBox.width,this.boundingBox.height,"11px Verdana","#000000")},this.forgeQueuePane.addHitbox(n)}initializeQueueHitboxes(){this.forgeQueuePane.clearHitboxes();var e=.07*this.forgeQueuePane.boundingBox.height;GemForger.forgeQueue.forEachQueuedGem(((t,i)=>{var o=new Hitbox({x:.725*this.forgeQueuePane.contentWidth,y:e,width:.195*this.forgeQueuePane.contentWidth,height:.07*this.forgeQueuePane.boundingBox.height},{onmousedown:function(e){console.log(e),GemForger.canApplyCatalyst()&&null!=e&&(e.applyCatalyst(),mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play())}.bind(o,t),onmouseenter:function(e){null!=e&&showTooltip(_("Apply Catalyst"),_("Speed up crafting of {0} by {1}%",e.blueprint.name,"20"))}.bind(o,t),onmouseexit:function(){hideTooltip()}},"pointer","applyCatalystButton_"+i);o.render=function(){var e;GemForger.canApplyCatalyst()?(e=craftb,this.setEnabled(!0)):(e=craftbg,this.setEnabled(!1));var t=this.parent.context;renderButton(t,e,_("APPLY CATALYST"),this.boundingBox.x+this.parent.scrollbarWidth,this.boundingBox.y/this.parent.scale,this.boundingBox.width,this.boundingBox.height,"11px Verdana","#000000")},this.forgeQueuePane.addHitbox(o),this.initializeCancelButton(t,e,i),e+=this.forgeQueuePane.boundingBox.height*(t.forgeWorkloadBase+t.numCatalystsApplied)*.09}))}initializeStatsHitboxes(){this.forgeStatsPane.clearHitboxes()}render(){if(this.context.save(),this.context.clearRect(0,0,this.boundingBox.width,this.boundingBox.height),this.context.restore(),super.render(),0==this.currentTabIndex){this.context.save(),this.context.fillStyle="#FFFFFF",this.context.strokeStyle="#000000",this.context.textBaseline="bottom",this.context.lineWidth=3,this.context.save(),this.context.globalAlpha=.4,renderRoundedRectangle(this.context,.06*this.boundingBox.width,.15*this.boundingBox.height,.87*this.boundingBox.width,.235*this.boundingBox.height,5,"#AAAAAA","#151515",1),renderRoundedRectangle(this.context,.06*this.boundingBox.width,.445*this.boundingBox.height,.87*this.boundingBox.width,.445*this.boundingBox.height,5,"#AAAAAA","#151515",1),this.context.globalAlpha=1,this.context.restore(),this.context.font="20px Verdana",this.context.strokeText(_("Inventory"),.075*this.boundingBox.width,.205*this.boundingBox.height),this.context.fillText(_("Inventory"),.075*this.boundingBox.width,.205*this.boundingBox.height),this.context.strokeText(_("Actions"),.075*this.boundingBox.width,.5*this.boundingBox.height),this.context.fillText(_("Actions"),.075*this.boundingBox.width,.5*this.boundingBox.height);var e=GemForger.currentLoad()+"/"+GemForger.currentMaxLoad();this.context.strokeText(_(e),.925*this.boundingBox.width-this.context.measureText(e).width,.5*this.boundingBox.height),this.context.fillText(_(e),.925*this.boundingBox.width-this.context.measureText(e).width,.5*this.boundingBox.height),this.context.font="15px Verdana";var t=[];t.push({icon:forgedRedGem,numOwned:numRedForgedGemsOwned()}),t.push({icon:forgedBlueGem,numOwned:numBlueForgedGemsOwned()}),t.push({icon:forgedGreenGem,numOwned:numGreenForgedGemsOwned()}),t.push({icon:forgedPurpleGem,numOwned:numPurpleForgedGemsOwned()}),t.push({icon:forgedYellowGem,numOwned:numYellowForgedGemsOwned()}),t.push({icon:forgeCatalystAsset,numOwned:numforgeCatalystsOwned()});for(var i=0;i<t.length;i++){var o=t[i],n=.125*this.boundingBox.width+.125*this.boundingBox.width*i;this.context.drawImage(darkdot,0,0,darkdot.width,darkdot.height,n,.22*this.boundingBox.height,.1*this.boundingBox.width,.125*this.boundingBox.height),this.context.drawImage(o.icon,0,0,o.icon.width,o.icon.height,n,.22*this.boundingBox.height,.1*this.boundingBox.width,.125*this.boundingBox.height),strokeTextShrinkToFit(this.context,o.numOwned,n,.22*this.boundingBox.height+.125*this.boundingBox.height,.1*this.boundingBox.width*.95,"right"),fillTextShrinkToFit(this.context,o.numOwned,n,.22*this.boundingBox.height+.125*this.boundingBox.height,.1*this.boundingBox.width*.95,"right")}this.context.restore(),this.context.drawImage(forgedRedGem,0,0,forgedRedGem.width,forgedRedGem.height,.2*this.boundingBox.width,.475*this.boundingBox.height,.1*this.boundingBox.width,.125*this.boundingBox.height);var h=GemForger.canQueueGem(RED_FORGED_GEM_INDEX)?craftb:craftbg;renderButton(this.context,h,_("CRAFT RED GEM"),.15*this.boundingBox.width,.6*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"11px Verdana","#000000"),h=GemForger.canQueueGem(BLUE_FORGED_GEM_INDEX)?craftb:craftbg,this.context.drawImage(forgedBlueGem,0,0,forgedBlueGem.width,forgedBlueGem.height,.45*this.boundingBox.width,.475*this.boundingBox.height,.1*this.boundingBox.width,.125*this.boundingBox.height),renderButton(this.context,h,_("CRAFT BLUE GEM"),.4*this.boundingBox.width,.6*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"11px Verdana","#000000"),h=GemForger.canQueueGem(GREEN_FORGED_GEM_INDEX)?craftb:craftbg,this.context.drawImage(forgedGreenGem,0,0,forgedGreenGem.width,forgedGreenGem.height,.7*this.boundingBox.width,.475*this.boundingBox.height,.1*this.boundingBox.width,.125*this.boundingBox.height),renderButton(this.context,h,_("CRAFT GREEN GEM"),.65*this.boundingBox.width,.6*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"11px Verdana","#000000"),h=GemForger.canQueueGem(PURPLE_FORGED_GEM_INDEX)?craftb:craftbg,this.context.drawImage(forgedPurpleGem,0,0,forgedPurpleGem.width,forgedPurpleGem.height,.2*this.boundingBox.width,.68*this.boundingBox.height,.1*this.boundingBox.width,.125*this.boundingBox.height),renderButton(this.context,h,_("CRAFT PURPLE GEM"),.15*this.boundingBox.width,.805*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"11px Verdana","#000000"),h=GemForger.canQueueGem(YELLOW_FORGED_GEM_INDEX)?craftb:craftbg,this.context.drawImage(forgedYellowGem,0,0,forgedYellowGem.width,forgedYellowGem.height,.45*this.boundingBox.width,.68*this.boundingBox.height,.1*this.boundingBox.width,.125*this.boundingBox.height),renderButton(this.context,h,_("CRAFT YELLOW GEM"),.4*this.boundingBox.width,.805*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"11px Verdana","#000000"),h=GemForger.canQueueGem(FORGE_CATALYST_INDEX)?craftb:craftbg,this.context.drawImage(forgeCatalystAsset,0,0,forgeCatalystAsset.width,forgeCatalystAsset.height,.7*this.boundingBox.width,.68*this.boundingBox.height,.1*this.boundingBox.width,.125*this.boundingBox.height),renderButton(this.context,h,_("CRAFT CATALYST"),.65*this.boundingBox.width,.805*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"11px Verdana","#000000")}if(1==this.currentTabIndex&&this.renderQueue(),2==this.currentTabIndex){if(this.context.save(),this.context.fillStyle="#FFFFFF",this.context.strokeStyle="#000000",this.context.textBaseline="bottom",this.context.lineWidth=3,GemForger.isAtMaxLevel()){var r=_("You Are At the Max Level");strokeTextShrinkToFit(this.context,r,0,.4*this.boundingBox.height,this.boundingBox.width,"center"),fillTextShrinkToFit(this.context,r,0,.4*this.boundingBox.height,this.boundingBox.width,"center")}else{var s=_("CURRENT"),d=_("Forge Level: {0}",gemForgeStructure.level),u=_("Forge Max Workload: {0}",GemForger.currentMaxLoad());this.context.font="bold 20px Verdana",strokeTextShrinkToFit(this.context,s,.08*this.boundingBox.width,.2*this.boundingBox.height,.38*this.boundingBox.width,"center"),fillTextShrinkToFit(this.context,s,.08*this.boundingBox.width,.2*this.boundingBox.height,.38*this.boundingBox.width,"center"),this.context.font="20px Verdana",strokeTextShrinkToFit(this.context,d,.08*this.boundingBox.width,.27*this.boundingBox.height,.38*this.boundingBox.width,"center"),fillTextShrinkToFit(this.context,d,.08*this.boundingBox.width,.27*this.boundingBox.height,.38*this.boundingBox.width,"center"),strokeTextShrinkToFit(this.context,u,.08*this.boundingBox.width,.34*this.boundingBox.height,.38*this.boundingBox.width,"center"),fillTextShrinkToFit(this.context,u,.08*this.boundingBox.width,.34*this.boundingBox.height,.38*this.boundingBox.width,"center");s=_("NEXT LEVEL"),d=_("Forge Level: {0}",gemForgeStructure.level+1),u=_("Forge Max Workload: {0}",GemForger.currentMaxLoad()+GemForger.levelUpWorkloadIncrease());this.context.font="bold 20px Verdana",strokeTextShrinkToFit(this.context,s,.5*this.boundingBox.width,.2*this.boundingBox.height,.38*this.boundingBox.width,"center"),fillTextShrinkToFit(this.context,s,.5*this.boundingBox.width,.2*this.boundingBox.height,.38*this.boundingBox.width,"center"),this.context.font="20px Verdana",strokeTextShrinkToFit(this.context,d,.5*this.boundingBox.width,.27*this.boundingBox.height,.38*this.boundingBox.width,"center"),fillTextShrinkToFit(this.context,d,.5*this.boundingBox.width,.27*this.boundingBox.height,.38*this.boundingBox.width,"center"),strokeTextShrinkToFit(this.context,u,.5*this.boundingBox.width,.34*this.boundingBox.height,.38*this.boundingBox.width,"center"),fillTextShrinkToFit(this.context,u,.5*this.boundingBox.width,.34*this.boundingBox.height,.38*this.boundingBox.width,"center")}this.context.restore()}}renderQueue(){var e=this.forgeQueuePane.context;e.save(),e.imageSmoothingEnabled=!1,this.forgeQueuePane.clearCanvas(),e.fillStyle="#FFFFFF",e.strokeStyle="#000000",e.textBaseline="bottom",e.lineWidth=3,this.forgeQueuePane.contentHeight=.08*this.forgeQueuePane.boundingBox.height+.09*this.forgeQueuePane.boundingBox.height*GemForger.currentMaxLoad(),e.font="20px Verdana";var t=_("Current Workload: {0}",GemForger.currentLoad()+"/"+GemForger.currentMaxLoad());e.strokeText(t,.5*this.forgeQueuePane.contentWidth-e.measureText(t).width/2,.05*this.forgeQueuePane.boundingBox.height),e.fillText(t,.5*this.forgeQueuePane.contentWidth-e.measureText(t).width/2,.05*this.forgeQueuePane.boundingBox.height),e.globalAlpha=.3,renderRoundedRectangle(e,0,.07*this.forgeQueuePane.boundingBox.height,this.forgeQueuePane.contentWidth,.01*this.forgeQueuePane.boundingBox.height+.09*this.forgeQueuePane.boundingBox.height*GemForger.currentMaxLoad(),2,"#AAAAAA","#111111",1);for(var i=0;i<GemForger.currentMaxLoad()-1;i++){var o=this.forgeQueuePane.boundingBox.height*(.07+.09*i)-2;i%2==0&&renderRoundedRectangle(e,0,o,this.forgeQueuePane.contentWidth,.09*this.forgeQueuePane.boundingBox.height,0,"#AAAAAA","#555555",0)}e.globalAlpha=1,e.restore();var n=0;GemForger.forgeQueue.forEachQueuedGem(((t,i)=>{var o=.07*this.forgeQueuePane.boundingBox.height+this.forgeQueuePane.boundingBox.height*n*.09;drawImageFitInBox(e,t.icon,0,o-.01*this.forgeQueuePane.boundingBox.height,.12*this.forgeQueuePane.boundingBox.height,.09*this.forgeQueuePane.boundingBox.height);var h=this.forgeQueuePane.boundingBox.height*(.08+.08*(t.forgeWorkloadBase-1));e.font="15px Verdana",renderProgressBar(e,_("Time Remaining: {0}",formattedCountDown(t.remainingTimeAfterCatalysts())),extradarkgreydot,blackdot,.11*this.forgeQueuePane.contentWidth,o,.6*this.forgeQueuePane.contentWidth,h,"#FFFFFF",t.percentComplete()),n+=t.forgeWorkloadBase,this.forgeQueuePane.getHitboxById("applyCatalystButton_"+i).boundingBox.y=o*this.forgeQueuePane.scale;for(var r=0;r<t.numCatalystsApplied;r++)o=.07*this.forgeQueuePane.boundingBox.height+this.forgeQueuePane.boundingBox.height*n*.09,e.drawImage(forgeCatalystAsset,0,0,forgeCatalystAsset.width,forgeCatalystAsset.height,.15*this.forgeQueuePane.contentWidth,o-.01*this.forgeQueuePane.boundingBox.height,.055*this.forgeQueuePane.contentWidth,.07*this.forgeQueuePane.boundingBox.height),renderProgressBar(e,_("Catalyst"),blackdot,blackdot,.21*this.forgeQueuePane.contentWidth,o,.5*this.forgeQueuePane.contentWidth,.05*this.forgeQueuePane.boundingBox.height,"#FFFFFF",1),n++})),this.forgeQueuePane.hitboxes.length!=1+GemForger.forgeQueue.queuedGems.length&&this.initializeQueueHitboxes(),this.forgeQueuePane.renderChildren()}}