class PinnedBlueprintsManager{isEnabled=!1;autoPin=!0;pinnedBlueprints=[];update(){if(this.isEnabled){for(var e=0;e<drillState.equippedDrillEquips.length;e++){let i=getDrillEquipById(drillState.equippedDrillEquips[e]),t=getDrillBlueprintByEquipId(drillState.equippedDrillEquips[e]),n=getBlueprintsAboveDrillEquipLevel(i.level,e).filter((e=>isBlueprintKnown(e.category,e.id)))[0];this.pinnedBlueprints.forEach((i=>{(n&&i[0]==n.category&&i[2]==e||t&&t.category==i[0]&&t.id==i[1])&&this.removePinnedBlueprint(i[0],i[1]),1!=i[0]||isDrillBlueprintHigherLevelThanEquippedPart(getBlueprintById(i[0],i[1]))||this.removePinnedBlueprint(i[0],i[1])})),n&&this.canAddBlueprint()&&this.autoPin&&this.addPinnedBlueprint(n.category,n.id,e)}for(e=0;e<=worldAtDepth(depth).index;e++){let i=getBlueprintById(craftingCategories.miners,e);if(i.craftedItem.item.canCraft()?this.isBlueprintPinned(craftingCategories.miners,e)||this.addPinnedBlueprint(craftingCategories.miners,e):this.removePinnedBlueprint(craftingCategories.miners,e),i.craftedItem.item.isAtMaxLevel()){getBlueprintById(craftingCategories.minerLevels,e).craftedItem.item.canCraft()?this.isBlueprintPinned(craftingCategories.minerLevels,e)||this.addPinnedBlueprint(craftingCategories.minerLevels,e):this.removePinnedBlueprint(craftingCategories.minerLevels,e)}}}}canAddBlueprint(){return!0}addPinnedBlueprint(e,i,t=null){this.isBlueprintPinned(e,i)?this.removePinnedBlueprint(e,i):this.canAddBlueprint()&&(this.pinnedBlueprints.push([e,i,t]),this.sort()),activeLayers.PinnedBlueprintsLayer.initializeBlueprints()}isBlueprintPinned(e,i){return this.pinnedBlueprints.filter((t=>t[0]==e&&t[1]==i)).length>0}removePinnedBlueprint(e,i){for(let t=0;t<this.pinnedBlueprints.length;t++)if(this.pinnedBlueprints[t][0]==e&&this.pinnedBlueprints[t][1]==i){this.pinnedBlueprints.splice(t,1);break}activeLayers.PinnedBlueprintsLayer.initializeBlueprints()}sort(){this.pinnedBlueprints.sort(((e,i)=>{let t=[{bp:getBlueprintById(e[0],e[1]),cost:new BigNumber(0),canCraft:!1},{bp:getBlueprintById(i[0],i[1]),cost:new BigNumber(0),canCraft:!1}];t.forEach((e=>{if(e.bp.hasOwnProperty("levels")){var i=e.bp.craftedItem.item.getCurrentLevel();if(!e.bp.craftedItem.item.isAtMaxLevel()){let t=e.bp.levels[i].ingredients,n=9==e.bp.category||10==e.bp.category;e.cost=getRealBlueprintCost(getIngredientListWithDiscounts(t,n)),e.canCraft=canCraftBlueprint(e.bp.category,e.bp.id,0,t)}}else e.canCraft=canCraftBlueprint(e.bp.category,e.bp.id,0,e.bp.ingredients),e.cost=getRealBlueprintCost(getIngredientListWithDiscounts(e.bp.ingredients))}));let n=0;return t[0].cost.lessThan(t[1].cost)?n=-1:t[0].cost.greaterThan(t[1].cost)&&(n=1),t[0].canCraft>t[1].canCraft?n=-1:t[0].canCraft<t[1].canCraft&&(n=1),n}))}}var pinnedBlueprintsManager=new PinnedBlueprintsManager;