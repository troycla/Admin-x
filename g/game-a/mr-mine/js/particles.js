const VARIANTS_PER_PARTICLE_EFFECT=7;class Particles extends UiLayer{layerName="Particles";zIndex=2;isRendered=!0;isPopup=!1;allowBubbling=!0;overrideRendering=!0;context=PARTICLES;frameCount=0;previousNumFramesRendered=0;previousBoundingBox;renderedParticles=!1;renderedCoordinates=[];constructor(e){super(e),this.context&&(this.context.canvas.style.x=e.x,this.context.canvas.style.y=e.y,this.context.canvas.style.width=e.width,this.context.canvas.style.height=e.height)}setBoundingBox(){this.boundingBox=this.context.canvas.getBoundingClientRect(),this.boundingBox.x/=uiScaleX,this.boundingBox.y/=uiScaleY,this.boundingBox.width/=uiScaleX,this.boundingBox.height/=uiScaleY}render(){}}class CachableParticle{context;x;y;width;height;lifeSpanFrames;numFramesRemaining;velX=0;velY=0;accX=0;accY=0;rgb1=[71,60,43];rgb2=[71,60,43];constructor(e,t,i,r,a,n){this.context=e,this.x=t,this.y=i,this.width=r,this.height=a,this.lifeSpanFrames=n,this.numFramesRemaining=n}percentComplete(){return this.numFramesRemaining/this.lifeSpanFrames}renderFunction(){this.context.strokeStyle=rgbToHex(57,49,36),this.context.lineWidth=1;var e=this.rgb1[0]*(1-this.percentComplete())+this.rgb2[0]*this.percentComplete(),t=this.rgb1[1]*(1-this.percentComplete())+this.rgb2[1]*this.percentComplete(),i=this.rgb1[2]*(1-this.percentComplete())+this.rgb2[2]*this.percentComplete();this.context.fillStyle=rgbToHex(e,t,i),this.context.globalAlpha=Math.pow(this.percentComplete(),.3),this.context.fillRect(this.x,this.y,this.width,this.height),this.context.strokeRect(this.x,this.y,this.width,this.height),this.context.globalAlpha=1}update(){this.renderFunction(),this.velX+=this.accX,this.velY+=this.accY,this.x+=this.velX,this.y+=this.velY,this.numFramesRemaining--}}class ParticleGroup{particles=[];frames=[];constructor(){}addParticle(e){this.particles.push(e)}update(){for(var e=0;e<this.particles.length;e++)this.particles[e].update();this.cacheFrame()}cacheFrame(){var e=new Image,t=this.particles[0].context.canvas.toDataURL();e.src=t,this.frames.push(e)}reset(){this.particles=[],this.frames=[]}}function generateParticleEffects(){var e=document.createElement("canvas");e.width=200,e.height=200,e.style.width=200,e.style.height=200,e.style.zIndex=1e4,e.style.position="absolute",e.style.x=0,e.style.y=0;for(var t=0;t<7;t++){for(var i=new ParticleGroup,r=24,a=0;a<rand(7,15);a++){(s=new CachableParticle(e.getContext("2d"),100,193,rand(2,5),rand(2,5),r)).velX=(0==rand(0,1)?1:-1)*Math.pow(rand(1e3,1900)/1e3,3),s.velY=-.5*rand(120,200)/10,s.accY=1.1*rand(900,1100)/1e3,i.addParticle(s)}for(var n=0;n<r;n++)e.getContext("2d").clearRect(0,0,e.getContext("2d").canvas.width,e.getContext("2d").canvas.height),i.update();assetCache.set("particles_0_"+t,i.frames),e.getContext("2d").clearRect(0,0,e.getContext("2d").canvas.width,e.getContext("2d").canvas.height),i.reset()}for(t=0;t<7;t++){for(i=new ParticleGroup,r=12,a=0;a<rand(12,20);a++){(s=new CachableParticle(e.getContext("2d"),110,197,rand(2,3),rand(2,3),r)).velX=(0==rand(0,1)?1:-1)*Math.pow(rand(1e3,1400)/1e3,3),s.velY=-.6*rand(120,200)/10,s.accY=1.4*rand(900,1100)/1e3,i.addParticle(s)}for(n=0;n<r;n++)e.getContext("2d").clearRect(0,0,e.getContext("2d").canvas.width,e.getContext("2d").canvas.height),i.update();assetCache.set("particles_1_"+t,i.frames),e.getContext("2d").clearRect(0,0,e.getContext("2d").canvas.width,e.getContext("2d").canvas.height),i.reset()}for(t=0;t<7;t++){for(i=new ParticleGroup,r=12,a=0;a<rand(7,15);a++){var s;(s=new CachableParticle(e.getContext("2d"),104,193,rand(2,5),rand(2,5),r)).rgb1=[rand(120,200),60,43],s.velX=(0==rand(0,1)?1:-1)*Math.pow(rand(1e3,1900)/1e3,3),s.velY=-.5*rand(120,200)/10,s.accY=1.1*rand(900,1100)/1e3,i.addParticle(s)}for(n=0;n<r;n++)e.getContext("2d").clearRect(0,0,e.getContext("2d").canvas.width,e.getContext("2d").canvas.height),i.update();assetCache.set("particles_2_"+t,i.frames),e.getContext("2d").clearRect(0,0,e.getContext("2d").canvas.width,e.getContext("2d").canvas.height),i.reset()}}generateParticleEffects();var particlesPerMinerTypeSettings=[];function existsParticlesForMinerType(e,t){return particlesPerMinerTypeSettings[e].hasOwnProperty(t)}function getNumFramesInParticleAnimation(e,t){return assetCache.get(getParticleCachePrefixForMinerType(e,t)+"0").length}function getParticleCachePrefixForMinerType(e,t){return particlesPerMinerTypeSettings[e][t]}particlesPerMinerTypeSettings[EARTH_INDEX]=[],particlesPerMinerTypeSettings[EARTH_INDEX][0]="particles_0_",particlesPerMinerTypeSettings[EARTH_INDEX][1]="particles_0_",particlesPerMinerTypeSettings[EARTH_INDEX][2]="particles_0_",particlesPerMinerTypeSettings[EARTH_INDEX][3]="particles_1_",particlesPerMinerTypeSettings[EARTH_INDEX][4]="particles_1_",particlesPerMinerTypeSettings[EARTH_INDEX][6]="particles_2_",particlesPerMinerTypeSettings[EARTH_INDEX][8]="particles_1_",particlesPerMinerTypeSettings[EARTH_INDEX][10]="particles_1_",particlesPerMinerTypeSettings[MOON_INDEX]=[],particlesPerMinerTypeSettings[TITAN_INDEX]=[];