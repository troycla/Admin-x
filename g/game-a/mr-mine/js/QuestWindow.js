class QuestWindow extends TabbedPopupWindow{layerName="Quests";domElementId="QUESTSD";context=QUESTS;headerHeightFraction=.2;questScrollbox;constructor(t){super(t),t||this.setBoundingBox(),this.setFrameImagesByWorldIndex(0),this.initializeTabs([]),this.initializeHitboxes()}render(){this.clearCanvas(),this.questScrollbox.clearCanvas(),this.questScrollbox.renderChildren(),this.renderChildren(),this.renderHeader()}initializeHitboxes(){this.questScrollbox=new Scrollbox(this.bodyContainer.boundingBox.width-30,3*this.bodyContainer.boundingBox.height,this.context,this.bodyContainer.boundingBox.x+15,this.bodyContainer.boundingBox.y+this.bodyContainer.boundingBox.height*this.headerHeightFraction,this.bodyContainer.boundingBox.width-15,this.bodyContainer.boundingBox.height*(1-this.headerHeightFraction),15),this.questScrollbox.isUsingOptimizedRerender=!0,this.addHitbox(this.questScrollbox);var t,i=Math.min(60,this.questScrollbox.contentWidth/2),e=Math.floor((this.questScrollbox.boundingBox.width-6-15)/i);Math.ceil(questManager.quests.length/e);for(var o in t=e>1?(this.questScrollbox.boundingBox.width-6-15-i*e)/(e-1):0,questManager.quests){var n=3+o%e*(i+t),s=Math.floor(3+Math.floor(o/e)*(i+t)),h=new QuestButton(questManager.quests[o],{x:n,y:s,width:i,height:i});this.questScrollbox.addHitbox(h)}this.questScrollbox.setContentHeightToIncludeLastChild(7),this.questScrollbox.scrollTo(0)}renderHeader(){this.context.save();var t=Math.round(.3*this.bodyContainer.boundingBox.height*this.headerHeightFraction);this.context.font=t+"px KanitM",this.context.textBaseline="top",this.context.fillStyle="#FFFFFF",this.context.strokeStyle="#000000",this.context.lineWidth=4,this.context.drawImage(darkdot,0,0,1,1,this.bodyContainer.boundingBox.x,this.bodyContainer.boundingBox.y,this.bodyContainer.boundingBox.width,this.bodyContainer.boundingBox.height*this.headerHeightFraction-graySeparator.height/2),strokeTextWrap(this.context,_("QUESTS"),this.bodyContainer.boundingBox.x,this.bodyContainer.boundingBox.y+t/2.5,this.bodyContainer.boundingBox.width,"center"),fillTextWrap(this.context,_("QUESTS"),this.bodyContainer.boundingBox.x,this.bodyContainer.boundingBox.y+t/2.5,this.bodyContainer.boundingBox.width,"center");var i=questManager.getCompletedQuestCount(),e=.3*this.bodyContainer.boundingBox.height*this.headerHeightFraction;renderFancyProgressBar(this.context,i+" / "+questManager.quests.length,i/questManager.quests.length,this.bodyContainer.boundingBox.x+this.bodyContainer.boundingBox.width*(1-.8)/2,this.bodyContainer.boundingBox.y+this.bodyContainer.boundingBox.height*this.headerHeightFraction-e-12,.8*this.bodyContainer.boundingBox.width,e,"#76E374","#000000","#FFFFFF",timerFrame);var o=graySeparator;this.context.drawImage(o,this.bodyContainer.boundingBox.x,this.bodyContainer.boundingBox.y+this.bodyContainer.boundingBox.height*this.headerHeightFraction-o.height/2,this.bodyContainer.boundingBox.width,o.height),this.context.restore()}generateDummyQuests(t){this.quests=[];for(var i=0;i<t;++i){var e=new Quest;e.id=i,e.icon=questguy,e.name="QUEST "+i,e.description="Quest description",e.isVisible=i<.65*t,e.isVisible&&Math.random()<.25&&e.markComplete(),this.quests.push(e)}}}