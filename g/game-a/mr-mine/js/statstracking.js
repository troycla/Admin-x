var mineralAndMoneyLog=[],totalValueLog=[],singleMiningLoopValueSnapshot=[],useragent="",camefrom="0",userIdSetInSession=!1,lastTimeDataWasLogged=0,timesLoggedAtSameTime=0,wasInitialized=!1,statsigUser={};const STATSIG_CLIENT_SDK_KEY="client-KJvy91lgbAjVvXxzMXwqLy1PUgmN7Hbi6w0PUmxBB17";function initializeTrackers(){platform.allowTracking?(initializeAmplitude(),statsigInit()):console.error("[STATS TRACKING] Attempting to initialize trackers when tracking has been disabled")}function initializeAmplitude(){platform.allowTracking?(!function(e,t){var n=e.amplitude||{_q:[],_iq:{}},i=t.createElement("script");i.type="text/javascript",i.integrity="sha384-tzcaaCH5+KXD4sGaDozev6oElQhsVfbJvdi3//c2YvbY02LrNlbpGdt3Wq4rWonS",i.crossOrigin="anonymous",i.async=!0,i.src="https://cdn.amplitude.com/libs/amplitude-8.5.0-min.gz.js",i.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};var a=t.getElementsByTagName("script")[0];function r(e,t){e.prototype[t]=function(){return this._q.push([t].concat(Array.prototype.slice.call(arguments,0))),this}}a.parentNode.insertBefore(i,a);for(var s=function(){return this._q=[],this},o=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove"],l=0;l<o.length;l++)r(s,o[l]);n.Identify=s;for(var c=function(){return this._q=[],this},u=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"],d=0;d<u.length;d++)r(c,u[d]);n.Revenue=c;var p=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function m(e){function t(t){e[t]=function(){e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}for(var n=0;n<p.length;n++)t(p[n])}m(n),n.getInstance=function(e){return e=(e&&0!==e.length?e:"$default_instance").toLowerCase(),Object.prototype.hasOwnProperty.call(n._iq,e)||(n._iq[e]={_q:[]},m(n._iq[e])),n._iq[e]},e.amplitude=n}(window,document),amplitude.getInstance().init("dbd433cd708e693cb06663c8a4448e29"),amplitude.getInstance().logEvent("gameStarted")):console.error("[STATS TRACKING] Attempting to initialize trackers when tracking has been disabled")}var tier=isDevUser?"development":"production",firstSessionVersion=version,firstSessionTime=(new Date).getTime(),firstTestVersion=latestTestNumber;async function statsigInit(){if(!platform.allowTracking)return void console.error("[STATS TRACKING] Attempting to initialize trackers when tracking has been disabled");await trackGenericEvent("gameInit",1);initializeTests()}null==localStorage.firstSessionVersion?localStorage.firstSessionVersion=version:(firstSessionVersion=parseInt(localStorage.firstSessionVersion),isNaN(localStorage.firstSessionVersion)&&(firstSessionVersion=version)),null==localStorage.firstSessionTime?localStorage.firstSessionTime=(new Date).getTime():(firstSessionTime=parseInt(localStorage.firstSessionTime),isNaN(localStorage.firstSessionTime)&&(firstSessionTime=(new Date).getTime())),null==localStorage.firstTestVersion?localStorage.firstTestVersion=(new Date).getTime():(firstTestVersion=parseInt(localStorage.firstTestVersion),isNaN(localStorage.firstTestVersion)&&(firstTestVersion=latestTestNumber));var statsigUserProperties={};async function updateUserProperties(){if(platform.allowTracking){amplitude.getInstance().setUserId(UID);var e=centsSpent>0,t={splitTestSeed:uxSeed,gameVersion:version,earliestVersion:earliestVersion,firstTimePlayed:firstTimePlayed,isSpender:e,splitTestValue1:splitTestValue1,isDev:isDevUser,saveFiles:void 0!==localStorage.R?localStorage.R.split("|").length-1:0,activePlayTimeMinutes:activePlayTimeMinutes,totalPlayMinutes:totalPlayMinutes,depth:depth,hasImported:hasImported,testNumber:testNumber,basicChestRewardRollerSeed:basicChestRewardRollerSeed,goldenChestRewardRollerSeed:goldenChestRewardRollerSeed,tradeRollerSeed:tradeRollerSeed,caveRollerSeed:caveRollerSeed,clickableRollerSeed:clickableRollerSeed,chestSpawnRollerSeed:chestSpawnRollerSeed,languageOverride:languageOverride,systemLanguage:platform.getSystemLanguage(),platform:platformName(),isFirstSession:void 0===localStorage.R,numGameLaunches:numGameLaunches,firstSessionVersion:firstSessionVersion,firstSessionTime:firstSessionTime,firstTestVersion:firstTestVersion,environment:tier,UID:UID};amplitude.getInstance().setUserProperties(t),statsigUser={userID:UID,environment:{tier:tier},appVersion:version,custom:t},statsigUserProperties=t,wasInitialized?await statsig.updateUser(statsigUser):(wasInitialized=!0,await statsig.initialize(STATSIG_CLIENT_SDK_KEY,statsigUser))}}async function logToStatsig(e,t,n={}){if(platform.allowTracking){var i={...statsigUserProperties,...n};return statsig.logEvent(e,t,i)}}function logToAmplitude(e,t,n={}){platform.allowTracking&&amplitude.getInstance().logEvent(e,{value:t,labels:n})}function logValuationStats(){mineralAndMoneyLog.push([getValueOfMinerals(),money]),totalValueLog.push(getValueOfMinerals().add(money)),mineralAndMoneyLog.length>60&&mineralAndMoneyLog.splice(0,1),totalValueLog.length>60&&totalValueLog.splice(0,1)}function lastMinuteChangeInValues(){if(singleMiningLoopValueSnapshot.length<=1)return 0;for(var e=0,t=0,n=0;n<singleMiningLoopValueSnapshot.length;n++)singleMiningLoopValueSnapshot[n]>0&&(e+=parseInt(singleMiningLoopValueSnapshot[n]),t++);return t<=0||e<=0?0:10*Math.floor(e/t)*60}async function trackGenericEvent(e,t,n={}){if(!platform.allowTracking)return;if("undefined"!=typeof isSimulating&&isSimulating)return;await updateUserProperties();e=encodeURIComponent(e),t=encodeURIComponent(t);var i="https://mrmineservices.com/track.php",a=JSON.stringify({key:e,value:t,labels:n,uid:UID,playtime:playtime});i+="?data="+encodeURIComponent(a);var r=new XMLHttpRequest;if(r.open("GET",i,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==r.readyState&&r.responseText},r.send(),lastTimeDataWasLogged<currentTime()+1e3)timesLoggedAtSameTime=0,lastTimeDataWasLogged=currentTime();else if(++timesLoggedAtSameTime>2)return void console.log("Event throttled: "+e);return logToAmplitude(e,t,n),logToStatsig(e,t,n)}function trackEvent_DepthIncrease(e){if(e<=20||e%10==0){trackGenericEvent("depthIncrease",e)}isSimulating&&rows[depth+3]&&rows[depth+3][totalSims-currentSim-1]&&"0"==rows[depth+3][totalSims-currentSim-1]&&(rows[depth+3][totalSims-currentSim-1]=playtime,"0"==rows[depth+2][totalSims-currentSim-1]&&(rows[depth+2][totalSims-currentSim-1]=playtime))}function trackEvent_StartTutorial(){trackGenericEvent("startTutorial",1)}function trackEvent_FinishTutorial(){trackGenericEvent("finishTutorial",1)}function trackEvent_CraftUpgrade(e){}function trackEvent_FoundChest(e){}function trackEvent_FinishBossBattle(e){trackGenericEvent("finishBossBattle",e,{depth:depth})}function trackEvent_FinishExcavation(e){}function trackEvent_PurchasedTickets(e,t=0){trackGenericEvent("purchasedTickets",e,{depth:depth,cents:t})}function trackEvent_HireMiner(e){trackGenericEvent("hireMiner",e)}function trackEvent_UpgradeMiners(e){trackGenericEvent("upgradeMiners",e)}function trackEvent_PurchaseBlueprint(e){trackGenericEvent("purchaseBlueprint",e)}function trackEvent_SpentTickets(e,t){}function trackEvent_CompletedCave(e){}function trackEvent_LoadedGame(){trackGenericEvent("loadedGameNumLaunches",numGameLaunches)}function trackeEvent_exitedGame(){var e=performance.now()/6e4;trackGenericEvent("exitedGameSessionDuration",e,{activePlayTime:activePlayTimeMinutesInSession}),isFirstSession&&trackGenericEvent("exitedFirstGameSessionDuration",e,{activePlayTime:activePlayTimeMinutesInSession})}function trackeEvent_redeemCode(){var e=depth;redeemedCodes.length>0&&trackGenericEvent("redeemCode",e,{code:redeemedCodes[redeemedCodes.length-1]})}function trackEvent_GainedMoney(e,t,n=!1){if(isSimulating){let r=["scientists","basic chest","gold chest","caves","trades","battles","selling","super miner"],s=totalSims;if(rows[4].length<=totalSims)for(var i=0;i<totalSims;i++)for(var a=0;a<r.length;a++)0==i&&(rows[4][s+a]=r[a]),rows[5+i][s+a]=0;isNaN(Number(e))?console.log("received nan value from: "+r[t]):(rows[totalSims-currentSim+4][s+t]+=Number(e),n&&(rows[totalSims-currentSim+4][s+6]-=Number(e)))}}function trackeEvent_upgradeDrill(e){if(trackGenericEvent("upgradeDrill",e),isSimulating){let n=simDepth+10,i=!1;if(!rows[n-1]){rows[n-1]=["Sim Num","Depth","Drill Level"];for(var t=0;t<totalSims;t++)rows[n-1]=[].push()}for(;!i;)rows[n]?n++:(rows[n]=[currentSim,depth,e],i=!0)}}function trackeEvent_completedQuest(e){}function logInstall(){if(platform.allowTracking){var e="https://playsaurusstats.com/p.png?cmd=gameInstall&gameUid="+UID+"&gameName=MrMine_"+platformName(),t=new XMLHttpRequest;t.open("GET",e,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&t.responseText},t.send()}}function logRevenue(e,t=""){if(platform.allowTracking){var n="https://playsaurusstats.com/p.png?cmd=gameRevenue&gameName=MrMine_"+platformName()+"&gameUid="+UID+"&revenueCents="+e+"&language="+actuallyUsedLanguage()+"&label1="+depth+"&label2="+totalPlayMinutes+"&label3="+t,i=new XMLHttpRequest;i.open("GET",n,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4==i.readyState&&i.responseText},i.send()}}function logInfluencer(e){if(platform.allowTracking){var t="https://playsaurusstats.com/p.png?cmd=setInfluencerId&gameUid="+UID+"&influencer="+e,n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){4==n.readyState&&n.responseText},n.send()}}function trackEvent_logSentiment(e){trackGenericEvent("sentiment",e)}function trackEvent_logConfusionLevel(e){trackGenericEvent("confusion",e)}function trackEvent_logPurchaseWindowOpen(){if(!hasOpenedPurchaseWindow){hasOpenedPurchaseWindow=!0;trackGenericEvent("purchaseWindowOpen",1)}}platform.allowTracking&&initializeTrackers();