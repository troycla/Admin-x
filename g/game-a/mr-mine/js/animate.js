const CHARACTER_BLINK_PERIOD=36;var backpackRenderLoop,animationFrameRequest,isHoveringOverGarage=0,flickerinventory=!1,flickercraft=!1,windowState=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],saveButtons=[0,0,0,0,0,0,0],hasAnimatedThisFrame=0,isArrowOnTopLevel=!1,minerImages=[miner,miner1,miner2,miner3,miner4,miner5,miner6,miner7,miner8,miner9,miner10],lunarMinerImages=[lunarminer1,lunarminer2,lunarminer3,lunarminer4,lunarminer5,lunarminer6,lunarminer7,lunarminer8,lunarminer9,lunarminer10,lunarminer11],titanMinerImages=[titanminer1,titanminer2,titanminer3,titanminer4,titanminer5,titanminer6,titanminer7,titanminer8,titanminer9,titanminer10,titanminer11],minerHatImages=[bigtransblock,bigtransblock,bigtransblock,bigtransblock,bigtransblock,bigtransblock,bigtransblock,bigtransblock,bigtransblock,bigtransblock,bigtransblock],uiScaleX=1,uiScaleY=1,limitFramerate=!1,maxFramerate=60,isWaitingForRender=!1,lastRenderTime=0,renderTimeout=1e3,found=[[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,0,0,0,0,0,0,0,0,0]],[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,0,0,0,0,0,0,0,0,0]],[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,0,0,0,0,0,0,0,0,0]],[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,0,0,0,0,0,0,0,0,0]],[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,0,0,0,0,0,0,0,0,0]]],renderDeltaTime=1;function animate(){isSimulating||(!isWaitingForRender||performance.now()>lastRenderTime+renderTimeout)&&(animationFrameRequest&&(cancelAnimationFrame(animationFrameRequest),animationFrameRequest=null),isWaitingForRender=!0,animationFrameRequest=requestAnimationFrame(_animate))}function _animate(){isSimulating||isMobile()&&limitFramerate&&performance.now()<lastRenderTime+1e3/maxFramerate||(renderDeltaTime=performance.now()-lastRenderTime,isGameLoaded&&renderUi(),isSaveFileLoaded()&&!isTimelapseOn?(renderDialogues(),renderHintArrows(),drawEffects()):isMobile()||renderLoadingScreen(),lastRenderTime=performance.now(),isWaitingForRender=!1,animationFrameRequest=null)}function renderUi(){for(var e in windowState[7]>0&&renderPurchaseUi(),activeLayers)activeLayers[e].overrideRendering||activeLayers[e].render(),"confirmationLayer"==e.substring(0,17)&&0==activeLayers[e].context.canvas.width&&delete activeLayers[e]}function updateUi(e){for(var t in activeLayers)activeLayers[t].update(e)}function renderUiOnSubinterval(e,t,a,r,...i){a<interval?(clearInterval(r),r=setInterval((function(){activeLayers[e]?t(...i):clearInterval(r)}),a)):t(...i)}var showHintArrows=!0;function renderHintArrows(){if(!isMobile()&&showHintArrows){var e,t=!1;if(!activeLayers.hasOwnProperty("SELL")&&(0==getEarth().workersHired&&getValueOfMinerals()>=getEarth().workerHireCost()||6==getBlueprintCount()&&getValueOfMinerals()>=150||1==drillState.drill().level&&getValueOfMinerals()>=250||isCapacityFull()&&drillState.engine().level+drillState.drill().level+drillState.fan().level+drillState.cargo().level<=6||1==drillState.engine().level&&drillBlueprints[0].ingredients[0].item.getName()==_("Money")&&getValueOfMineralsExcludingHe3().greaterThanOrEqualTo(drillBlueprints[0].ingredients[0].quantity))&&(t=!0,MAIN.drawImage(arrow,0,0,arrow.width,arrow.height,Math.ceil(.21*mainw),Math.ceil(mainh*(.33-.179*currentlyViewedDepth+.018*oscillate(numFramesRendered,8))),Math.floor(.05*mainw),Math.floor(.12*mainh))),!activeLayers.hasOwnProperty("Hire")&&money.greaterThanOrEqualTo(getEarth().workerHireCost())&&0==getEarth().workersHired&&(t=!0,MAIN.drawImage(arrow,0,0,arrow.width,arrow.height,Math.ceil(.41*mainw),Math.ceil(mainh*(.37-.179*currentlyViewedDepth+.018*oscillate(numFramesRendered,8))),Math.floor(.05*mainw),Math.floor(.12*mainh))),!activeLayers.hasOwnProperty("Arch")&&0==numExcavationsCompleted&&0!=hasUnlockedScientists&&numActiveScientists()>0&&!isOnActiveExcavation(0)&&(t=!0,0==currentlyViewedDepth&&MAIN.drawImage(arrow,0,0,arrow.width,arrow.height,Math.ceil(.31*mainw),Math.ceil(mainh*(.2-.179*currentlyViewedDepth+.018*oscillate(numFramesRendered,8))),Math.floor(.05*mainw),Math.floor(.12*mainh))),numCoalOwned()<30&&0==getEarth().workersHired&&worldClickables.length>0&&money.lessThan(30)){var a=.111*mainh+.178*(4-(currentlyViewedDepth-worldClickables[0].depth))*mainh;MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,mainw*(.135+.072*(worldClickables[0].spawnLocation-1))+oscillate(numFramesRendered,8)*mainh*.018,a+.075*mainh,Math.floor(.075*mainw),Math.floor(.08*mainh))}0==currentlyViewedDepth&&depth>=1&&!hasBranchTriggered(0)&&depth<10&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.9*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)),(getBlueprintCount()>0&&!hasCraftedABlueprint&&canCraftAnyBlueprint(1)||1==drillState.drill().level&&canCraftBlueprint(1)||playerNeedsHelpCraftingManager())&&(activeLayers.crafting?(playerNeedsHelpCraftingManager()&&1!=activeLayers.crafting.currentTabIndex&&MAIN.drawImage(arrow,Math.ceil(.38*mainw),Math.ceil(mainh*(.11-.179*currentlyViewedDepth+.018*oscillate(numFramesRendered,8))),Math.floor(.03*mainw),Math.floor(.075*mainh)),(!hasCraftedABlueprint&&0==activeLayers.crafting.currentTabIndex||playerNeedsHelpCraftingManager()&&1==activeLayers.crafting.currentTabIndex)&&(activeLayers.crafting.selectedBlueprint?MAIN.drawImage(arrowleft,Math.floor(.75*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.68*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)):activeLayers.crafting.blueprintListHitboxes[0].isCollapsed?MAIN.drawImage(arrowright,Math.floor(.165*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.26*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)):0==activeLayers.crafting.currentTabIndex?MAIN.drawImage(arrowright,Math.floor(.165*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.35*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)):1==activeLayers.crafting.currentTabIndex&&(activeLayers.crafting.openTab(1),activeLayers.crafting.selectedBlueprint=getBlueprintById(3,2),activeLayers.crafting.initializeCraftingPane()))):(t=!0,MAIN.drawImage(arrow,Math.ceil(.65*mainw),Math.ceil(mainh*(.34-.179*currentlyViewedDepth+.018*oscillate(numFramesRendered,8))),Math.floor(.05*mainw),Math.floor(.12*mainh))));for(var r=0;r<questManager.quests.length;r++)if(questManager.getQuest(r).isCollectable()){t=!0,MAIN.drawImage(arrow,0,0,arrow.width,arrow.height,Math.ceil(.63*mainw),Math.ceil(mainh*(.19-.179*currentlyViewedDepth+.018*oscillate(numFramesRendered,8))),Math.floor(.05*mainw),Math.floor(.12*mainh));break}if(depth<10&&depth>=5&&isClickableAtDepth(5)&&10==getClickableAtDepth(5).spawnLocation&&currentlyViewedDepth>=5)for(r=0;r<5;r++)currentlyViewedDepth-r==5&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.8*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(mainh*(.175+.178*(4-r))),Math.floor(.075*mainw),Math.floor(.08*mainh));for(var r in tradeConfig.tradingPosts){var i=getTradesForWorld(r);if(isTradeAvailable(i[0])&&!tradeConfig.tradingPosts[r].playerHasSeenNewTrade&&depth>=tradeConfig.tradingPosts[r].depth&&currentlyViewedDepth>=tradeConfig.tradingPosts[r].depth)for(var n=0;n<5;n++)currentlyViewedDepth-n==tradeConfig.tradingPosts[r].depth&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.5*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(mainh*(.15+.178*(4-n))),Math.floor(.075*mainw),Math.floor(.08*mainh))}if(playerNeedsHelpCraftingTradingPost()&&(currentlyViewedDepth<tradeConfig.tradingPosts[0].depth-1?MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.9*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)):currentlyViewedDepth>tradeConfig.tradingPosts[0].depth+4&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.15*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)),depth>=tradeConfig.tradingPosts[0].depth&&currentlyViewedDepth>=tradeConfig.tradingPosts[0].depth))for(n=0;n<5;n++)currentlyViewedDepth-n==tradeConfig.tradingPosts[0].depth&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.5*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(mainh*(.15+.178*(4-n))),Math.floor(.075*mainw),Math.floor(.08*mainh));if(0==chestService.totalBlackChestsOpened&&depth>SUPER_MINER_DEPTH+2&&(currentlyViewedDepth<SUPER_MINER_DEPTH-2?MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.9*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)):currentlyViewedDepth>SUPER_MINER_DEPTH+2&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.15*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh))),0==numberOfCavesExplored&&depth>=MIN_CAVE_SYSTEM_SPAWN_DEPTH&&(e=getActiveCaves()).length>0){var l=getClickableAtDepth(e[0].kmDepth);if(l){a=.111*mainh+.178*(4-(currentlyViewedDepth-e[0].kmDepth))*mainh;MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,mainw*(.135+.072*(l.spawnLocation-1))+oscillate(numFramesRendered,8)*mainh*.018,a+.075*mainh,Math.floor(.075*mainw),Math.floor(.08*mainh))}}else if(!hasCollectedTreasure&&treasureStorage.treasure.length>0)if(activeLayers.caveManagement)MAIN.drawImage(arrowright,0,0,arrowright.width,arrowright.height,Math.floor(.1*mainw)+oscillate(numFramesRendered,8)*mainw*.013,.824*mainh,Math.floor(.075*mainw),Math.floor(.08*mainh));else if(currentlyViewedDepth>=CAVE_BUILDING_DEPTH&&currentlyViewedDepth<CAVE_BUILDING_DEPTH+5){a=.111*mainh+.178*(4-(currentlyViewedDepth-CAVE_BUILDING_DEPTH))*mainh;MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.5*mainw)+oscillate(numFramesRendered,8)*mainw*.013,a+.075*mainh,Math.floor(.075*mainw),Math.floor(.08*mainh))}else MAIN.drawImage(arrowright,0,0,arrowright.width,arrowright.height,Math.floor(.84*mainw)+oscillate(numFramesRendered,8)*mainw*.013,.32*mainh,Math.floor(.075*mainw),Math.floor(.08*mainh));if(currentlyViewedDepth>2&&t&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.15*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)),playerNeedsHelpFindingGolem()&&(currentlyViewedDepth<49?MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.9*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)):currentlyViewedDepth>54&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.15*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)),depth>49&&currentlyViewedDepth>=50))for(r=0;r<5;r++)currentlyViewedDepth-r==50&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.16*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(mainh*(.15+.178*(4-r))),Math.floor(.075*mainw),Math.floor(.08*mainh));if(playerNeedsHelpFindingBrokenRobot()&&(currentlyViewedDepth<224?MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.9*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)):currentlyViewedDepth>229&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.15*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)),depth>224&&currentlyViewedDepth>=225))for(r=0;r<5;r++)currentlyViewedDepth-r==225&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.16*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(mainh*(.15+.178*(4-r))),Math.floor(.075*mainw),Math.floor(.08*mainh));if(playerNeedsHelpFindingChestCollector()&&(currentlyViewedDepth<99?MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.9*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)):currentlyViewedDepth>104&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.08*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(.15*mainh),Math.floor(.075*mainw),Math.floor(.08*mainh)),depth>99&&currentlyViewedDepth>=100))for(r=0;r<5;r++)currentlyViewedDepth-r==100&&MAIN.drawImage(arrowleft,0,0,arrowleft.width,arrowleft.height,Math.floor(.73*mainw)+oscillate(numFramesRendered,8)*mainw*.013,Math.ceil(mainh*(.15+.178*(4-r))),Math.floor(.075*mainw),Math.floor(.08*mainh))}}function playerNeedsHelpCraftingManager(){return canCraftBlueprint(3,2)&&0==managerStructure.level}function playerNeedsHelpCraftingTradingPost(){return canCraftBlueprint(3,0)&&0==tradingPostStructure.level&&drillState.equippedDrillEquips[0]>=9}function playerNeedsHelpFindingChestCollector(){return depth>200&&chestCollectorChanceStructure.level<1}function playerNeedsHelpFindingGolem(){return depth>52&&depth<70&&0==hasFoundGolem&&afk>=14}function playerNeedsHelpFindingBrokenRobot(){return depth>227&&depth<250&&0==hasFoundGidget}function renderDialogues(){oneTimeDialogue.isActive?isMobile()?(TUT.clearRect(0,0,tutw,tuth),TUT.fillStyle="#a5a5a5",TUT.strokeStyle="#000000",TUT.fillRect(.1*tutw,.13*tuth,.8*tutw,.432*tuth),TUT.strokeRect(.1*tutw,.13*tuth,.8*tutw,.432*tuth),TUT.fillStyle="#000000",TUT.drawImage(oneTimeDialogue.image,0,0,oneTimeDialogue.image.width,oneTimeDialogue.image.height,.1*tutw,.13*tuth,.2*tutw,.432*tuth),TUT.strokeRect(.1*tutw,.13*tuth,.2*tutw,.432*tuth),document.getElementById("tutorialTextContent").innerHTML=_(oneTimeDialogue.text),document.getElementById("tutorialNextText").innerHTML=_("Tap to Continue"),document.getElementById("personTalkingNameText").innerHTML=_(oneTimeDialogue.name),document.getElementById("tutorialNextText").style.top="50%",document.getElementById("tutorialNextText").style.left="45%",document.getElementById("personTalkingNameText").style.left="22%"):(TUT.clearRect(0,0,tutw,tuth),TUT.fillStyle="#a5a5a5",TUT.strokeStyle="#000000",TUT.fillRect(.25*tutw,.13*tuth,.5*tutw,.27*tuth),TUT.strokeRect(.25*tutw,.13*tuth,.5*tutw,.27*tuth),TUT.fillStyle="#000000",TUT.drawImage(oneTimeDialogue.image,0,0,oneTimeDialogue.image.width,oneTimeDialogue.image.height,.25*tutw,.13*tuth,.125*tutw,.27*tuth),TUT.strokeRect(.25*tutw,.13*tuth,.125*tutw,.27*tuth),document.getElementById("tutorialTextContent").innerHTML=_(oneTimeDialogue.text),document.getElementById("tutorialNextText").innerHTML=_("Tap to Continue"),document.getElementById("personTalkingNameText").innerHTML=_(oneTimeDialogue.name)):-1!=tutsection&&(TUT.clearRect(0,0,tutw,tuth),tutcoordinates[tutsection][0]+tutcoordinates[tutsection][1]>0&&(TUT.drawImage(bloop,0,0,50,50,tutcoordinates[tutsection][0]*tutw-50*Math.abs(Math.sin(numFramesRendered/Math.PI)),tutcoordinates[tutsection][1]*tuth-50*Math.abs(Math.sin(numFramesRendered/Math.PI)),100*Math.abs(Math.sin(numFramesRendered/Math.PI)),100*Math.abs(Math.sin(numFramesRendered/Math.PI))),0!==tutcoordinates[tutsection][2]&&0!==tutcoordinates[tutsection][3]&&(TUT.strokeStyle="#000000",TUT.lineWidth=9,TUT.beginPath(),TUT.moveTo(tutcoordinates[tutsection][0]*tutw,tutcoordinates[tutsection][1]*tuth),TUT.lineTo(tutcoordinates[tutsection][2]*tutw,tutcoordinates[tutsection][3]*tuth),0!==tutcoordinates[tutsection][4]&&0!==tutcoordinates[tutsection][5]&&TUT.lineTo(tutcoordinates[tutsection][4]*tutw,tutcoordinates[tutsection][5]*tuth),TUT.stroke(),TUT.strokeStyle="#FFFFFF",TUT.lineWidth=5,TUT.beginPath(),TUT.moveTo(tutcoordinates[tutsection][0]*tutw,tutcoordinates[tutsection][1]*tuth),TUT.lineTo(tutcoordinates[tutsection][2]*tutw,tutcoordinates[tutsection][3]*tuth),0!==tutcoordinates[tutsection][4]&&0!==tutcoordinates[tutsection][5]&&TUT.lineTo(tutcoordinates[tutsection][4]*tutw,tutcoordinates[tutsection][5]*tuth),TUT.stroke())),TUT.drawImage(tuts[tutsection],0,0,640,193,.25*tutw,.13*tuth,.5*tutw,.27*tuth),document.getElementById("tutorialTextContent").innerHTML=_(tutsText[tutsection]),document.getElementById("tutorialNextText").innerHTML=_("Click to Continue"),document.getElementById("personTalkingNameText").innerHTML=_(tutsNames[tutsection]))}function renderPurchaseUi(){PU.fillStyle="#FFFFFF",PU.drawImage(sellbg,0,0,640,405,0,0,purchasedw,purchasedh);var e="14px Verdana";"french"==language&&(e="12px Verdana"),1==windowState[7]?("undefined"==typeof isPaypalWindowVisible||isPaypalWindowVisible||showDiv("paypalPopup",4),renderButton(PU,tab_blank,_("GET TICKETS"),0,0,.2*purchasedw,.05*purchasedh,e,"#FFFFFF"),renderButton(PU,tab_dark_blank,_("USE TICKETS"),.2*purchasedw,0,.2*purchasedw,.05*purchasedh,e,"#FFFFFF"),PU.drawImage(ticketicon,0,0,25,25,.45*purchasedw,.9*purchasedh,.05*purchasedw,.05*purchasedh),PU.fillText("x"+tickets,.5*purchasedw,.933*purchasedh)):("undefined"!=typeof isPaypalWindowVisible&&isPaypalWindowVisible&&hideDiv("paypalPopup"),renderButton(PU,tab_dark_blank,_("GET TICKETS"),0,0,.2*purchasedw,.05*purchasedh,e,"#FFFFFF"),renderButton(PU,tab_blank,_("USE TICKETS"),.2*purchasedw,0,.2*purchasedw,.05*purchasedh,e,"#FFFFFF"),PU.fillText("x"+tickets,.5*purchasedw,.933*purchasedh),PU.drawImage(chest1,0,0,100,120,.15*purchasedw,.2*purchasedh,.3*purchasedw,.48*purchasedh),PU.drawImage(chest2,0,0,100,120,.55*purchasedw,.2*purchasedh,.3*purchasedw,.48*purchasedh),PU.font="24px KanitM",PU.fillStyle="#1798c7",PU.fillText(_("BUY"),.15*purchasedw+.3*purchasedw/2-PU.measureText(_("BUY")).width/2,.2*purchasedh+.43*purchasedh),PU.fillText(_("BUY"),.55*purchasedw+.3*purchasedw/2-PU.measureText(_("BUY")).width/2,.2*purchasedh+.43*purchasedh),PU.drawImage(ticketicon,0,0,25,25,.45*purchasedw,.9*purchasedh,.05*purchasedw,.05*purchasedh),renderButton(PU,craftb,_("REDEEM"),.75*purchasedw,.9*purchasedh,.2*purchasedw,.04*purchasedh,e,"#000000")),PU.drawImage(closei,0,0,closei.width,closei.height,.94*purchasedw,.01*purchasedh,.05*purchasedw,.05*purchasedh)}function renderLoadingScreen(){TI.clearRect(0,0,titlecw,titlech),TI.drawImage(title4,0,0,title4.width,title4.height,0,0,titlecw,titlech),TI.drawImage(newgameblank,0,0,newgameblank.width,newgameblank.height,.2*titlecw,.82*titlech,.28*titlecw,.15*titlech),TI.drawImage(importb,0,0,importb.width,importb.height,.105*titlecw,.82*titlech,.09*titlecw,.15*titlech),TI.drawImage(languageOptionsIcon,.005*titlecw,.945*titlech,.03*titlecw,.05*titlech),(isSteam()||isWeb())&&TI.drawImage(steamBackup,0,0,steamBackup.width,steamBackup.height,.04*titlecw,.945*titlech,.03*titlecw,.05*titlech);var e=TI.fillStyle,t=TI.font;TI.fillStyle="#000000",TI.font="56px BubbleGum",TI.textBaseline="top","czech"==language&&(TI.font="56px KanitB"),0==saves.length&&Object.keys(currentBackups.shortTerm).length+Object.keys(currentBackups.longTerm).length<1?TI.drawImage(arrow,Math.ceil(.3*titlecw),Math.ceil(.63*titlech+4*oscillate(numFramesRendered,2)),Math.floor(.08*titlecw),Math.floor(.18*titlech)):0==saves.length&&Object.keys(currentBackups.shortTerm).length+Object.keys(currentBackups.longTerm).length>0&&TI.drawImage(arrow,Math.ceil(.025*titlecw),Math.ceil(.8*titlech+4*oscillate(numFramesRendered,2)),Math.floor(.06*titlecw),Math.floor(.14*titlech)),fillTextWrapWithHeightLimit(TI,_("NEW GAME"),.225*titlecw,.86*titlech,.225*titlecw,.08*titlech,"center"),TI.textBaseline="bottom",TI.fillStyle=e,TI.font=t,limitedTimeEventManager.isHalloween()&&TI.drawImage(jackolantern,0,0,jackolantern.width,jackolantern.height,.435*titlecw,.12*titlech,.0533*titlecw,.1*titlech),limitedTimeEventManager.isXmas()&&TI.drawImage(xmasTree,0,0,xmasTree.width,xmasTree.height,.41*titlecw,.03*titlech,.075*titlecw,.18*titlech),TI.fillStyle="#FFFFFF";var a="v"+((version-100)/100).toFixed(2)+buildLetter;TI.fillText(a,titlecw-TI.measureText(a).width,titlech-2),0!=checks[6]&&(TI.fillStyle="#FFFFFF",0!=lgame&&TI.fillText(_("Please Refresh the Game!"),.36*titlecw,.46*titlech),document.getElementById("Gi").style.visibility="visible"),TI.drawImage(Logo,0,0,Logo.width,Logo.height,.55*titlecw,.02*titlech,.5*titlecw,.5*titlech);for(var r=0;r<50;r++)Math.random()<.5&&(lights[r+1]>lights[r]?lights[r]++:lights[r]--,lights[r]<10&&Math.floor(30*Math.random())>10&&(lights[r]+=2),(r<10||r>40)&&Math.floor(30*Math.random())>10&&(lights[r]+=2),lights[r]=lights[r]+lightlogic[Math.floor(38*Math.random())],lights[r]>28?lights[r]=28:lights[r]<1&&(lights[r]=1)),TI.drawImage(titlelight,0,0,3,10,titlecw*(.718+.003*r),titlech*(lights[r]/100-.11),.003*titlecw,titlech*(.29-lights[r]/100));TI.drawImage(homeFrame,0,0,homeFrame.width,homeFrame.height,.631*titlecw,.5*titlech,.323*titlecw,.374*titlech),RSc>2&&(TI.drawImage(newgamebtnshadow,0,0,newgamebtnshadow.width,newgamebtnshadow.height,.2*titlecw,.82*titlech,.28*titlecw,.15*titlech),TI.drawImage(importbtnshadow,0,0,importbtnshadow.width,importbtnshadow.height,.105*titlecw,.82*titlech,.09*titlecw,.15*titlech));for(var i=0;i<3;i++)0==pendingDeleteSlotIndex||i+1!==pendingDeleteSlotIndex?i<RSc&&TI.drawImage(closei,0,0,32,32,Math.floor(.5*titlecw),Math.floor(.22*titlech)+i*Math.floor(.175*titlech)+i+Math.floor(.13*titlech),25,25):(TI.drawImage(yesno,0,0,225,99,Math.floor(.41*titlecw),Math.floor(.3*titlech)+i*Math.floor(.175*titlech)+i,Math.floor(.13*titlecw),Math.floor(.147*titlech)),TI.fillStyle="#000000",TI.font="15px KanitM","japanese"==language&&(TI.font="12px KanitM"),TI.fillText(_("Delete This Game?"),Math.floor(.412*titlecw)+.005*titlecw,Math.floor(.3*titlech)+i*Math.floor(.175*titlech)+i+Math.floor(.035*titlech)),TI.font="13px KanitM",TI.fillText(_("YES"),Math.floor(.41*titlecw)+.055*titlecw-TI.measureText(_("YES")).width/2,Math.floor(.3*titlech)+i*Math.floor(.175*titlech)+i+Math.floor(.108*titlech)),TI.fillText(_("NO"),Math.floor(.41*titlecw)+.102*titlecw-TI.measureText(_("NO")).width/2,Math.floor(.3*titlech)+i*Math.floor(.175*titlech)+i+Math.floor(.108*titlech)),TI.fillStyle="#FFFFFF");for(var n=0;n<RSc;n++){if(addl=0,TI.font="17px Verdana",saveButtons[n]>0&&(TI.fillStyle="#FFDF00"),TI.fillText(sids[n],titlecw*(.05+addl),titlech*(.325+.175*n)),TI.fillText(beautifynum(parseInt(saves[n][1]))+" Km",titlecw*(.05+addl),titlech*(.35+.175*n)),TI.fillText("$"+beautifynum(saves[n][0]),titlecw*(.05+addl),titlech*(.375+.175*n)),TI.fillText(beautifynum(Math.ceil(saves[n][81]/60))+" "+_("mins"),titlecw*(.05+addl),titlech*(.4+.175*n)),TI.fillStyle="#FFFFFF",saves[n][1]>303)try{for(var l=0;l<15;l++){var o=saves[n][137+l].split("!");""!==o[0]&&o.length>1&&!isNaN(o[0])&&TI.drawImage(weaponStats[o[0]].icon,0,0,50,50,titlecw*(.05+.02*l+addl),titlech*(.41+.175*n),.02*titlecw,.03*titlech)}}catch(e){console.error(e)}try{saveButtons[n]>0?(TI.drawImage(getDrillEquipById(parseInt(saves[n][5])).worldAsset,168*getAnimationFrameIndex(4,10),0,168,158,titlecw*(.3+addl),titlech*(.3+.175*n),.09*titlecw,.125*titlech),TI.drawImage(getDrillEquipById(parseInt(saves[n][4])).worldAsset,168*getAnimationFrameIndex(4,10),0,168,158,titlecw*(.3+addl),titlech*(.3+.175*n),.09*titlecw,.125*titlech)):(TI.drawImage(getDrillEquipById(parseInt(saves[n][5])).worldAsset,0,0,168,158,titlecw*(.3+addl),titlech*(.3+.175*n),.09*titlecw,.125*titlech),TI.drawImage(getDrillEquipById(parseInt(saves[n][4])).worldAsset,0,0,168,158,titlecw*(.3+addl),titlech*(.3+.175*n),.09*titlecw,.125*titlech))}catch(e){console.error(e)}}TI.font="18px Verdana"}function initFoundArray(e){found=[];for(var t=0;t<e;++t)found.push([[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,0,0,0,0,0,0,0,0,0]])}