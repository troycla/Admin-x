class ChestCompressor{queuedChests=[];chestStats={[ChestType.gold]:{paymentType:ChestType.basic,cost:()=>chestCompressorStructure.statValueForCurrentLevel(0),time:()=>60*chestCompressorTimeStructure.statValueForCurrentLevel(0)*60},[ChestType.black]:{paymentType:ChestType.gold,cost:()=>chestCompressorStructure.statValueForCurrentLevel(1),time:()=>60*chestCompressorTimeStructure.statValueForCurrentLevel(1)*60}};update(e){for(var t=this.queuedChests.length;t>0;t--)this.queuedChests[t-1][1]-=e,this.queuedChests[t-1][1]<=0&&this.grantChestAndRemoveFromQueue(t-1)}ticketCost(e){let t=this.queuedChests[e][1];return t<604800?Math.round(-26e-12*Math.pow(t,2)+31940559e-12*t+1):Math.round(10.8*math.sqrt(t/604800))}grantChestAndRemoveFromQueue(e){let t=this.queuedChests[e][0];chestService.storeChest(t),1==t?newNews(_("A Gold Chest finished compressing and has been added to your chest storage")):2==t&&newNews(_("An Ethereal Chest finished compressing and has been added to your chest storage")),this.queuedChests.splice(e,1)}canQueueChest(e){let t=this.chestStats[e];return chestService.storedChests[t.paymentType]>=t.cost()&&this.queuedChests.length<this.getSlotCount()}addChestToQueue(e){let t=this.chestStats[e];this.canQueueChest(e)&&(chestService.storedChests[t.paymentType]-=t.cost(),this.queuedChests.push([e,t.time()]),questManager.getQuest(72).markComplete())}getSlotCount(){return chestCompressorSlotStructure.statValueForCurrentLevel()}get saveState(){for(var e=[],t=0;t<this.queuedChests.length;t++)e.push(this.queuedChests[t].join("!"));return e.join("*")}set saveState(e){if(""!=e)for(var t=e.split("*"),s=0;s<t.length;s++)this.queuedChests.push(t[s].split("!"))}}var chestCompressor=new ChestCompressor;