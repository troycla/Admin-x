class CollapsibleMenu extends Hitbox{titleText;collapsedHeight;expandedHeight;canvas;context;targetContext;cursor="";isCollapsed=!0;constructor(t,i,e,s,h,o,n,a,l){var x={x:i,y:e,width:s,height:h};super(x,{},""),this.titleText=n,this.canvas=document.createElement("canvas"),this.canvas.width=s,this.canvas.height=o,this.context=this.canvas.getContext("2d"),this.targetContext=t,this.boundingBox=x,this.collapsedHeight=h,this.expandedHeight=o,this.font=a,this.fontColor=l,this.addHitbox(new Hitbox({x:0,y:0,width:s,height:h},{onmousedown:this.toggle.bind(this)},"pointer","titleBox"),!1)}render(){this.targetContext.save(),this.targetContext.clearRect(this.boundingBox.x,this.boundingBox.y,this.boundingBox.width,this.collapsedHeight+this.expandedHeight),this.targetContext.fillStyle="#070707",this.targetContext.globalAlpha=.7,this.targetContext.fillRect(this.boundingBox.x,this.boundingBox.y,this.boundingBox.width,this.collapsedHeight),this.targetContext.clearRect(this.boundingBox.x+1,this.boundingBox.y+1,this.boundingBox.width-2,this.collapsedHeight-2),this.targetContext.fillStyle="#111111",this.targetContext.fillRect(this.boundingBox.x+1,this.boundingBox.y+1,this.boundingBox.width-2,this.collapsedHeight-2),this.targetContext.globalAlpha=1,this.targetContext.fillStyle=this.fontColor,this.targetContext.font=this.font,this.targetContext.textBaseline="middle";var t=this.isCollapsed?"+ ":"- ";if(fillTextWrap(this.targetContext,t,this.boundingBox.x+5,this.boundingBox.y+this.collapsedHeight/2,15,"center"),fillTextShrinkToFit(this.targetContext,this.titleText,this.boundingBox.x+25,this.boundingBox.y+this.collapsedHeight/2,this.boundingBox.width-20,"left"),this.isCollapsed||this.targetContext.drawImage(this.canvas,this.boundingBox.x,this.boundingBox.y+this.collapsedHeight,this.boundingBox.width,this.expandedHeight-this.collapsedHeight),this.showNotificationIcon){this.targetContext.fillStyle="#FF0000",this.targetContext.strokeStyle="#FFFFFF",this.targetContext.lineWidth=2,this.targetContext.beginPath(),this.targetContext.arc(this.boundingBox.x+this.boundingBox.width-10,this.boundingBox.y+10,5,0,2*Math.PI),this.targetContext.fill(),this.targetContext.stroke()}this.targetContext.restore(),super.render()}toggle(){this.parent.isDirty=!0,this.isCollapsed?this.expand():this.collapse()}collapse(){this.parent.isDirty=!0,this.isCollapsed=!0,this.boundingBox.height=this.collapsedHeight,this.disableAllHitboxes(),this.getHitboxById("titleBox").setEnabled(!0)}expand(){this.parent.isDirty=!0,this.isCollapsed=!1,this.boundingBox.height=this.expandedHeight,this.enableAllHitboxes()}addHitbox(t,i=!0){t.setEnabled(!this.isCollapsed||!i),super.addHitbox(t)}setCanvasHeight(t){this.canvas.height=t}}