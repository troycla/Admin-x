class SettingsWindow extends TabbedPopupWindow{layerName="Settings";domElementId="SETTINGSD";context=SETTINGS;debugLogBox;eventLogBox;statsPanelBox;settingsPane;constructor(t,i=0){super(t),t||this.setBoundingBox();var n={0:_("Settings"),1:_("Event Log"),2:_("Debug Log"),3:_("Stats")};this.initializeTabs(Object.values(n)),this.settingsPane=new Hitbox({x:0,y:0,width:this.boundingBox.width,height:this.boundingBox.height},{},"","settingsPane"),this.settingsPane.allowBubbling=!0,this.addHitbox(this.settingsPane),this.debugLogBox=new Scrollbox(this.bodyContainer.boundingBox.width-15,this.bodyContainer.boundingBox.height,this.context,this.bodyContainer.boundingBox.x,this.bodyContainer.boundingBox.y,this.bodyContainer.boundingBox.width,this.bodyContainer.boundingBox.height-5,15),this.addHitbox(this.debugLogBox),this.debugLogBox.setVisible(!1),this.debugLogBox.setEnabled(!1),this.eventLogBox=new Scrollbox(this.bodyContainer.boundingBox.width-15,this.bodyContainer.boundingBox.height,this.context,this.bodyContainer.boundingBox.x,this.bodyContainer.boundingBox.y,this.bodyContainer.boundingBox.width,this.bodyContainer.boundingBox.height-5,15),this.addHitbox(this.eventLogBox),this.eventLogBox.setVisible(!1),this.eventLogBox.setEnabled(!1),this.statsPanelBox=new Scrollbox(this.bodyContainer.boundingBox.width-15,this.bodyContainer.boundingBox.height,this.context,this.bodyContainer.boundingBox.x,this.bodyContainer.boundingBox.y,this.bodyContainer.boundingBox.width,this.bodyContainer.boundingBox.height-5,15),this.addHitbox(this.statsPanelBox),this.statsPanelBox.setVisible(!1),this.statsPanelBox.setEnabled(!1),this.settingsPane.addHitbox(new Hitbox({x:.07*this.boundingBox.width,y:.205*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){savegame(),backupSavesToCloud(),newNews(_("Game saved!")),mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){showTooltip(_("Save Game"),_("The game automatically saves every 30 seconds. You can also use ctrl+s."),5*this.boundingBox.x,2*this.boundingBox.y)},onmouseexit:function(){hideTooltip()}},"pointer","saveButton")),this.settingsPane.addHitbox(new Hitbox({x:.07*this.boundingBox.width,y:.26*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){showExportPopup(),mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){showTooltip(_("Export"),_("Provides a game export code you can use to backup your save or use on another PC."),5*this.boundingBox.x,2*this.boundingBox.y)},onmouseexit:function(){hideTooltip()}},"pointer","exportButton")),this.settingsPane.addHitbox(new Hitbox({x:.07*this.boundingBox.width,y:.315*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){openExternalLinkInDefaultBrowser("http://www.clickerheroes.com/privacyPolicy.txt"),mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()}},"pointer","privacyButton")),this.settingsPane.addHitbox(new Hitbox({x:.3*this.boundingBox.width,y:.205*this.boundingBox.height,width:.3*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){openExternalLinkInDefaultBrowser("https://play.google.com/store/apps/details?id=com.playsaurus.mrmine&hl=en_US&gl=US"),mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){showTooltip(_("Play on Mobile"),_("Click to checkout the mrmine android version. (iOS is coming soon.)"))},onmouseexit:function(){hideTooltip()}},"pointer","saveButton")),this.settingsPane.addHitbox(new Hitbox({x:.65*this.boundingBox.width,y:.205*this.boundingBox.height,width:.03*this.boundingBox.width,height:.045*this.boundingBox.height},{onmousedown:function(){platform.toggleFullscreen(),mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()}},"pointer","fullscreenCheckbox")),this.settingsPane.addHitbox(new Hitbox({x:.3*this.boundingBox.width,y:.265*this.boundingBox.height,width:.3*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){savegame(),location.reload(),mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()},onmouseenter:function(){showTooltip(_("Log out of game"),_("Save and exit game to main menu."))},onmouseexit:function(){hideTooltip()}},"pointer","saveButton")),this.settingsPane.addHitbox(new Hitbox({x:.3*this.boundingBox.width,y:.315*this.boundingBox.height,width:.3*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){hideTooltip(),showLanguageSelection()},onmouseenter:function(){showTooltip(_("Language")+" (Language)",_("Change language.")+"<br> (Change language)")},onmouseexit:function(){hideTooltip()}},"pointer","saveButton")),this.settingsPane.addHitbox(new Hitbox({x:.075*this.boundingBox.width,y:.43*this.boundingBox.height,width:.03*this.boundingBox.width,height:.045*this.boundingBox.height},{onmousedown:function(){0==mute?(mute=1,music.volume=0):(mute=0,music.volume=.08),localStorage.mute=mute,mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()}},"pointer","musicButton")),this.settingsPane.addHitbox(new Hitbox({x:.075*this.boundingBox.width,y:.485*this.boundingBox.height,width:.03*this.boundingBox.width,height:.045*this.boundingBox.height},{onmousedown:function(){0==mutebuttons?mutebuttons=1:mutebuttons=0,localStorage.mutebuttons=mutebuttons,mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()}},"pointer","clickSoundButton")),this.settingsPane.addHitbox(new Hitbox({x:.075*this.boundingBox.width,y:.54*this.boundingBox.height,width:.03*this.boundingBox.width,height:.045*this.boundingBox.height},{onmousedown:function(){0==muteisotopes?muteisotopes=1:muteisotopes=0,localStorage.muteisotopes=muteisotopes,mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()}},"pointer","isotopeSoundButton")),this.settingsPane.addHitbox(new Hitbox({x:.075*this.boundingBox.width,y:.595*this.boundingBox.height,width:.03*this.boundingBox.width,height:.045*this.boundingBox.height},{onmousedown:function(){0==mutecapacity?mutecapacity=1:mutecapacity=0,localStorage.mutecapacity=mutecapacity,mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()}},"pointer","capicitySoundButton")),this.settingsPane.addHitbox(new Hitbox({x:.075*this.boundingBox.width,y:.72*this.boundingBox.height,width:.03*this.boundingBox.width,height:.045*this.boundingBox.height},{onmousedown:function(){1==quality?quality=0:quality=1,mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()}},"pointer","showMineralsButton")),this.settingsPane.addHitbox(new Hitbox({x:.075*this.boundingBox.width,y:.775*this.boundingBox.height,width:.03*this.boundingBox.width,height:.045*this.boundingBox.height},{onmousedown:function(){areQuotesEnabled=!areQuotesEnabled,mutebuttons||clickAudio[rand(0,clickAudio.length-1)].play()}},"pointer","showQuotesButton")),platform.saveAndQuit&&this.settingsPane.addHitbox(new Button(sellb,_("Save and Quit"),"14px Verdana","#000000",{x:(this.settingsPane.boundingBox.width-.2*this.boundingBox.width)/2,y:this.settingsPane.boundingBox.height-.15*this.boundingBox.height,width:.2*this.boundingBox.width,height:.05*this.boundingBox.height},{onmousedown:function(){platform.saveAndQuit()}},"pointer","quitButton")),i>0&&(this.currentTabIndex=i),this.onTabChange()}onTabChange(){this.settingsPane.setVisible(0==this.currentTabIndex),this.settingsPane.setVisible(0==this.currentTabIndex),this.eventLogBox.setVisible(1==this.currentTabIndex),this.eventLogBox.setEnabled(1==this.currentTabIndex),this.debugLogBox.setVisible(2==this.currentTabIndex),this.debugLogBox.setEnabled(2==this.currentTabIndex),this.statsPanelBox.setVisible(3==this.currentTabIndex),this.statsPanelBox.setEnabled(3==this.currentTabIndex)}render(){this.context.save(),this.context.clearRect(0,0,this.boundingBox.width,this.boundingBox.height),this.context.restore(),super.render(),this.context.fillStyle="#FFFFFF",0==this.currentTabIndex?(this.context.drawImage(darkdot,0,0,1,1,.04*this.boundingBox.width,.15*this.boundingBox.height,this.context.measureText(_("GENERAL")).width+.02*this.boundingBox.width,.05*this.boundingBox.height),this.context.fillText(_("GENERAL"),.05*this.boundingBox.width,.19*this.boundingBox.height),renderButton(SETTINGS,sellb,_("Save Game"),.07*this.boundingBox.width,.2*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"14px Verdana","#000000"),renderButton(SETTINGS,sellb,_("Export Game"),.07*this.boundingBox.width,.26*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"14px Verdana","#000000"),renderButton(SETTINGS,sellb,_("Privacy Policy"),.07*this.boundingBox.width,.315*this.boundingBox.height,.2*this.boundingBox.width,.05*this.boundingBox.height,"14px Verdana","#000000"),renderButton(SETTINGS,sellb,_("Play on Mobile"),.3*this.boundingBox.width,.2*this.boundingBox.height,.3*this.boundingBox.width,.05*this.boundingBox.height,"14px Verdana","#000000"),renderButton(SETTINGS,sellb,_("Exit To Main Menu"),.3*this.boundingBox.width,.26*this.boundingBox.height,.3*this.boundingBox.width,.05*this.boundingBox.height,"14px Verdana","#000000"),renderButton(SETTINGS,sellb,_("Language")+" (Language)",.3*this.boundingBox.width,.315*this.boundingBox.height,.3*this.boundingBox.width,.05*this.boundingBox.height,"14px Verdana","#000000"),platform.isFullscreenable()&&renderCheckboxWithText(SETTINGS,_("Fullscreen"),"14px Verdana","#FFFFFF",.65*this.boundingBox.width,.2*this.boundingBox.height,.03*this.boundingBox.width,.045*this.boundingBox.height,"#FFFFFF","#000000",platform.isFullscreen()),this.context.drawImage(darkdot,0,0,1,1,.04*this.boundingBox.width,.37*this.boundingBox.height,this.context.measureText(_("AUDIO")).width+.02*this.boundingBox.width,.05*this.boundingBox.height),this.context.fillText(_("AUDIO"),.05*this.boundingBox.width,.41*this.boundingBox.height),renderCheckboxWithText(SETTINGS,_("Music On"),"14px Verdana","#FFFFFF",.075*this.boundingBox.width,.43*this.boundingBox.height,.03*this.boundingBox.width,.045*this.boundingBox.height,"#FFFFFF","#000000",0==mute),renderCheckboxWithText(SETTINGS,_("Click Sounds On"),"14px Verdana","#FFFFFF",.075*this.boundingBox.width,.485*this.boundingBox.height,.03*this.boundingBox.width,.045*this.boundingBox.height,"#FFFFFF","#000000",0==mutebuttons),renderCheckboxWithText(SETTINGS,_("Isotope Sounds On"),"14px Verdana","#FFFFFF",.075*this.boundingBox.width,.54*this.boundingBox.height,.03*this.boundingBox.width,.045*this.boundingBox.height,"#FFFFFF","#000000",0==muteisotopes),renderCheckboxWithText(SETTINGS,_("Capacity Full Sound On"),"14px Verdana","#FFFFFF",.075*this.boundingBox.width,.595*this.boundingBox.height,.03*this.boundingBox.width,.045*this.boundingBox.height,"#FFFFFF","#000000",0==mutecapacity),this.context.drawImage(darkdot,0,0,1,1,.04*this.boundingBox.width,.66*this.boundingBox.height,this.context.measureText(_("EFFECTS")).width+.02*this.boundingBox.width,.05*this.boundingBox.height),this.context.fillText(_("EFFECTS"),.05*this.boundingBox.width,.7*this.boundingBox.height),renderCheckboxWithText(SETTINGS,_("Show Minerals Above Miners (And other effects)"),"14px Verdana","#FFFFFF",.075*this.boundingBox.width,.72*this.boundingBox.height,.03*this.boundingBox.width,.045*this.boundingBox.height,"#FFFFFF","#000000",1==quality),renderCheckboxWithText(SETTINGS,_("Show Miner Quotes"),"14px Verdana","#FFFFFF",.075*this.boundingBox.width,.775*this.boundingBox.height,.03*this.boundingBox.width,.045*this.boundingBox.height,"#FFFFFF","#000000",areQuotesEnabled)):1==this.currentTabIndex?this.renderLog(this.eventLogBox,eventlog):2==this.currentTabIndex?this.renderLog(this.debugLogBox,consoleLog):3==this.currentTabIndex&&this.renderStatsPanel()}renderLog(t,i){t.context.save(),t.context.clearRect(0,0,t.contentWidth,t.contentHeight);var n,e=0;t.context.font="16px Verdana",t.context.textBaseline="top",t.context.fillStyle="white";for(var o=i.length-1;o>=0;--o){n="object"==typeof i[o]?i[o][0]+_("({0} Ago)",formattedCountDown((currentTime()-i[o][1])/1e3)):i[o];var h=fillTextWrap(t.context,n,5,e+8,t.contentWidth-10);t.context.save(),t.context.fillStyle=o%2==1?"#333333":"#666666",t.context.globalAlpha=.3,t.context.globalCompositeOperation="destination-over",t.context.fillRect(h.x1,h.y1-4,t.contentWidth,h.height+8),t.context.restore(),e=h.y2}t.contentHeight<e&&(t.contentHeight=e,t.initializeScrollbar()),t.context.restore()}renderStatsPanel(){this.statsPanelBox.initializeScrollbar();var t=this.statsPanelBox.context;t.save(),t.imageSmoothingEnabled=!1,this.statsPanelBox.clearCanvas(),this.statsPanelBox.contentHeight=.08*this.statsPanelBox.boundingBox.height+.09*this.statsPanelBox.boundingBox.height*28,t.drawImage(drillState.drill().worldAsset,168*getAnimationFrameIndex(4,10),0,168,158,.62*buydw,.05*buydh,.25*buydw,.4*buydh),t.drawImage(drillState.engine().worldAsset,168*getAnimationFrameIndex(4,10),0,168,158,.62*buydw,.05*buydh,.25*buydw,.4*buydh),drillState.equippedDrillEquips[0]>-1&&t.drawImage(drillState.engine().icon,0,0,50,50,.57*buydw,.5*buydh,.07*buydw,.1*buydh),drillState.equippedDrillEquips[1]>-1&&t.drawImage(drillState.drill().icon,0,0,50,50,.65*buydw,.5*buydh,.07*buydw,.1*buydh),drillState.equippedDrillEquips[2]>-1&&t.drawImage(drillState.fan().icon,0,0,50,50,.73*buydw,.5*buydh,.07*buydw,.1*buydh),drillState.equippedDrillEquips[3]>-1&&t.drawImage(drillState.cargo().icon,0,0,50,50,.81*buydw,.5*buydh,.07*buydw,.1*buydh),t.fillStyle="#FFFFFF",t.font="14px Verdana",t.fillText(_("Time Played")+": "+shortenedFormattedTime(playtime),.03*buydw,.05*buydh),t.fillText(_("Drill Power")+": "+beautifynum(drillWattage())+" W",.03*buydw,.11*buydh);var i=estimatedTimeUntilNextDepth();if(t.fillText(_("Time Until {0}km Depth",depth+1)+": ",.03*buydw,.17*buydh),t.drawImage(oneDicons,220,0,20,20,.01*buydw+BY.measureText(_("Time Until {0}km Depth",depth+1)+": ").width-.005*buydw,.17*buydh-Math.round(.0225*buydw),Math.round(.025*buydw),Math.round(.025*buydw)),t.fillText(formattedCountDown(parseInt(i)+1),.01*buydw+BY.measureText(_("Time Until {0}km Depth",depth+1)+": ").width+.02*buydw,.17*buydh),mineralAndMoneyLog.length>0){for(var n=bigNumberMax.apply(null,totalValueLog),e=60;e>0;e--){var o=0n,h=0n;mineralAndMoneyLog.length>e&&(o=totalValueLog[e],h=mineralAndMoneyLog[e][0]);var d=Math.ceil(.0077*buydw),s=.44*buydh*divideBigNumberToDecimalNumber(o,n),u=.44*buydh*divideBigNumberToDecimalNumber(h,n);t.fillStyle="#004400",t.fillRect(Math.floor(d*(e+1)),.62*buydh-s,d,s),t.fillStyle="#440000",t.fillRect(Math.floor(d*(e+1)),.62*buydh-u,d,u)}t.fillStyle="#004400",t.fillRect(.11*buydw,.65*buydh,.01*buydw,.05*buydh),t.fillStyle="#440000",t.fillRect(.11*buydw,.72*buydh,.01*buydw,.05*buydh),t.fillStyle="#FFFFFF",t.font="12px Verdana",t.fillText(_("Money Value")+" ("+beautifynum(money)+")",.135*buydw,.68*buydh),t.fillText(_("Mineral Value")+" ("+beautifynum(getValueOfMinerals())+")",.135*buydw,.75*buydh),t.fillRect(.005*buydw,.18*buydh,.005*buydw,.44*buydh),t.fillRect(.005*buydw,.62*buydh,.5*buydw,.005*buydh),t.font="12px Verdana",t.fillText(_("Before"),.01*buydw,.658*buydh),t.fillText(_("Now"),.51*buydw,.658*buydh),t.font="14px Verdana"}else saveCanvasState(t),t.font="14px Verdana",t.fillText(_("Game must run for 60sec to get data for graph"),.01*buydw,.48*buydh),restoreCanvasState(t);saveCanvasState(t),t.fillText(_("Current Game Version")+": v"+(version-100)/100+"."+buildLetter+"."+splitTestValue1,.01*this.boundingBox.width,.87*this.boundingBox.height),t.fillText(_("Total Minerals Mined")+": "+beautifynum(totalMineralsMined),.01*this.boundingBox.width,.94*this.boundingBox.height),t.fillText(_("Total Basic Chests Opened")+": "+beautifynum(chestService.totalBasicChestsOpened),.01*this.boundingBox.width,1.01*this.boundingBox.height),t.fillText(_("Total Gold Chests Opened")+": "+beautifynum(chestService.totalGoldChestsOpened),.01*this.boundingBox.width,1.08*this.boundingBox.height),t.fillText(_("Total Ethereal Chests Opened")+": "+beautifynum(chestService.totalBlackChestsOpened),.01*this.boundingBox.width,1.15*this.boundingBox.height),t.fillText(_("Highest Level Scientist Ever")+": "+beautifynum(highestLevelScientist),.01*this.boundingBox.width,1.22*this.boundingBox.height),t.fillText(_("Scientists Buried")+": "+beautifynum(deadScientists),.01*this.boundingBox.width,1.29*this.boundingBox.height),t.fillText(_("Monsters Killed")+": "+beautifynum(monsterskilled),.01*this.boundingBox.width,1.36*this.boundingBox.height),t.fillText(_("Minerals Sacrificed")+": "+beautifynum(mineralsSacrificed),.01*this.boundingBox.width,1.43*this.boundingBox.height),t.fillText(_("Total Trades Done")+": "+beautifynum(totalCompletedTrades),.01*this.boundingBox.width,1.5*this.boundingBox.height),t.fillText(_("Total Time Lapsed")+": "+shortenedFormattedTime(60*totalTimeLapsedMinutes),.01*this.boundingBox.width,1.57*this.boundingBox.height),t.fillText(_("Total Time Lapsed This Session")+": "+shortenedFormattedTime(60*timelapseMinutesInSession),.01*this.boundingBox.width,1.64*this.boundingBox.height),t.fillText(_("Total Money Earned This Session")+": "+beautifynum(totalMoneyEarnedSession),.01*this.boundingBox.width,1.71*this.boundingBox.height),t.fillText(_("Value of Minerals Mined This Session")+": "+beautifynum(mineralsMinedValue),.01*this.boundingBox.width,1.78*this.boundingBox.height),t.fillText(_("Value of Minerals Sold This Session")+": "+beautifynum(mineralsSoldValue),.01*this.boundingBox.width,1.85*this.boundingBox.height),t.fillText(_("Total Money Collected from Chests This Session")+": "+beautifynum(chestService.totalMoneyFromChests),.01*this.boundingBox.width,1.92*this.boundingBox.height),t.fillText(_("Session Duration")+": "+shortenedFormattedTime(performance.now()/1e3),.01*this.boundingBox.width,1.99*this.boundingBox.height),restoreCanvasState(t)}}